function changeBox(){document.getElementById("div1").style.display="none",document.getElementById("div2").style.display="block",document.getElementById("password").focus()}function restoreBox(){""==document.getElementById("password").value&&(document.getElementById("div1").style.display="block",document.getElementById("div2").style.display="none")}function open_user_menu(){$(".user_menu").toggleClass("user_menu_open")}function validLogin(){if(error=0,username=$("#username").val(),""==username&&(document.getElementById("errorMessage").innerHTML='<i class="fa fa-info"></i> '+load_text("login_error"),document.getElementById("errorMessage").style.display="block",error=1),password=$("#password").val(),""==password&&(document.getElementById("errorMessage").innerHTML='<i class="fa fa-info"></i> '+load_text("login_error"),document.getElementById("errorMessage").style.display="block",error=1),0==error)return $.ajax({type:"POST",url:"functions/processed.php",data:{username:username,password:password},cache:!1,success:function(e){0==e?window.location="":(1==e&&(document.getElementById("errorMessage").innerHTML='<i class="fa fa-info"></i> '+load_text("login_error")),2==e&&(document.getElementById("errorMessage").innerHTML='<i class="fa fa-info"></i> '+load_text("login_disabled")),document.getElementById("errorMessage").style.display="block")}}),!1}function sendusername(){$.ajax({type:"POST",url:"functions/recover_username.php",data:{email:$("#email").val()},cache:!1,success:function(e){0==e?(document.getElementById("recover_username_h1").innerHTML=load_text("un_recover_h1_sent"),document.getElementById("recover_username_p").innerHTML=load_text("un_recover_p_sent"),document.getElementById("email").style.display="none",document.getElementById("button_box").style.display="none"):(document.getElementById("errorMessage").style.display="block",document.getElementById("email").style.borderColor="#d70000")}})}function requestpassword(){$.ajax({type:"POST",url:"functions/recover_password.php",data:{email:$("#email").val()},cache:!1,success:function(e){0==e?(document.getElementById("recover_password_h1").innerHTML=load_text("pw_recover_h1_sent"),document.getElementById("recover_password_p").innerHTML=load_text("pw_recover_p_sent"),document.getElementById("email").style.display="none",document.getElementById("button_box").style.display="none"):(document.getElementById("errorMessage").style.display="block",document.getElementById("email").style.borderColor="#d70000")}})}function resetpassword(){$.ajax({type:"POST",url:"functions/reset_password.php",data:{email:$("#email").val(),password:$("#password").val(),old_password:$("#code").val()},cache:!1,success:function(e){0==e?(document.getElementById("reset_password_h1").innerHTML=load_text("pw_reset_h1_done"),document.getElementById("div1").style.display="none",document.getElementById("div2").style.display="none",document.getElementById("button_box").style.display="none"):document.getElementById("errorMessage").style.display="block"}})}function escapeHtml(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}function clearHtml(e){return e=(e=(e=(e=(e=(e=(e=e.replace(/à/g,"a")).replace(/è/g,"e")).replace(/é/g,"e")).replace(/ì/g,"i")).replace(/ò/g,"o")).replace(/ù/g,"u")).replace(/[^a-zA-Z0-9]/g,"_")}function element_in(e){$("#"+e).fadeIn(50,function(){$("#"+e)})}function element_out(e){$("#"+e).fadeOut(50,function(){$("#"+e)})}function load_text(e){return $.ajax({type:"POST",url:"functions/lang_js.php",data:{label:e},async:!1,success:function(e){text=e}}),text}function show_radice_info(e){element_in("black_back"),element_in("light_box"),document.getElementById("light_box").innerHTML='<div class="light_box_container"><div class="light_box_content_small"><div id="lightbox_info"></div></div></div>',$("#lightbox_info").load("inc/radice_info_inc.php?radice_version="+e)}function hide_radice_info(){element_out("black_back"),element_out("light_box"),document.getElementById("light_box").innerHTML=""}function errorform(e,t,a){document.getElementById(e).style.borderColor="#d70000",document.getElementById("input_error_"+e).style.display="inline-block",error_message="",""!=t&&(error_message+=load_text(t)),""!=a&&(error_message+=a),document.getElementById("input_error_message_"+e).innerHTML=error_message}function errorattributeform(e,t,a){document.getElementById("input_error_"+e).style.display="inline-block",error_message="",""!=t&&(error_message+=load_text(t)),""!=a&&(error_message+=a),document.getElementById("input_error_message_"+e).innerHTML=error_message}function errorimageform(e,t,a){document.getElementById("box_input_image_"+e).style.borderColor="#d70000",document.getElementById("box_preview_image_"+e).style.borderColor="#d70000",document.getElementById("input_error_box_input_image_"+e).style.display="inline-block",error_message="",""!=t&&(error_message+=load_text(t)),""!=a&&(error_message+=a),document.getElementById("input_error_message_box_input_image_"+e).innerHTML=error_message}function restore_simple_input(e){document.getElementById(e).style.borderColor="#dddddd",document.getElementById("input_error_"+e).style.display="none",document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}function restore_attribute_input(e){document.getElementById("input_error_"+e).style.display="none",document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}function restore_image_input(e){document.getElementById("box_input_image_"+e).style.borderColor="#dddddd",document.getElementById("box_preview_image_"+e).style.borderColor="#dddddd",document.getElementById("input_error_box_input_image_"+e).style.display="none",document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}function restore_date_time(e){document.getElementById("string_value_"+e).style.borderColor="#dddddd",document.getElementById("hr_"+e).style.borderColor="#dddddd",document.getElementById("min_"+e).style.borderColor="#dddddd",document.getElementById("input_error_string_value_"+e).style.display="none",document.getElementById("input_error_hr_"+e).style.display="none",document.getElementById("input_error_min_"+e).style.display="none",document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}function restore_time(e){document.getElementById("hr_"+e).style.borderColor="#dddddd",document.getElementById("min_"+e).style.borderColor="#dddddd",document.getElementById("input_error_hr_"+e).style.display="none",document.getElementById("input_error_min_"+e).style.display="none",document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}function restore_file(e){document.getElementById("input_error_input_file_"+e).style.display="none",document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}function restoreform(e){document.getElementById("fakebutton")&&(document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"),document.getElementById(e).style.borderColor="#dddddd"}function set_last_edit(){document.getElementById("last_edit").value=1}function check_last_update(e,t,a){window.location="logout"==e?"functions/logout.php":""!=t?""!=a?"?fil="+e+"&dat="+t+"&pag="+a:"?fil="+e+"&dat="+t:"?fil="+e}function dont_leave(){element_out("black_back"),element_out("light_box")}function go_to(e){window.location=e}function load_page(e,t,a){document.getElementById("load_inner_box").style.display="block",$("#in_page").load("pages/"+e+".php?dat="+t+"&pag="+a)}function loaded_page(){setTimeout(function(){document.getElementById("load_inner_box").style.display="none",document.getElementById("in_page").style.display="block"},200)}function open_dropdown(e){element_in(e),$(document).mouseup(function(t){t.target.id==$("#"+e).attr(e)||$("#"+e).has(t.target).length||element_out(e)})}function search_box(e,t,a){search_string=document.getElementById("search_input").value.replace(/^\s\s*/,"").replace(/\s\s*$/,""),search_string=search_string.replace(/ /g,"---"),t+=search_string,window.location="?fil="+e+"&dat="+t+"&pag="+a}function cancel_search_box(e,t,a){window.location="?fil="+e+"&dat="+t+"&pag="+a}function saving_process(){element_out("in_page"),element_in("blank_back"),element_in("save_inner_box")}function saved_redirect(e,t){""==t&&(t=300),setTimeout(function(){window.location=e},t)}function saving_error(){document.getElementById("light_box").innerHTML='<div class="light_box_container"><div class="light_box_content_small"><span class="save_alert"><i class="fa fa-exclamation-triangle red-alert" aria-hidden="true"></i><br/>'+load_text("js_saving_error")+"</span></div></div>",element_out("blank_back"),element_out("save_inner_box"),element_in("light_box"),element_in("black_back"),setTimeout(function(){document.getElementById("savebutton")&&(document.getElementById("savebutton").style.display="block"),document.getElementById("fakebutton")&&(document.getElementById("fakebutton").style.display="none"),element_out("light_box"),element_out("black_back"),element_in("in_page")},1e3)}function select_all(e,t){for(num=$("#list_num").val(),1==t?($("#select_all").css("display","none"),$("#deselect_all").css("display","block")):($("#select_all").css("display","block"),$("#deselect_all").css("display","none")),index=1;index<=num;index++)$("#"+e+index).is(":disabled")||$("#"+e+index).prop("checked",t);show_delete_button()}function show_delete_button(){for(delete_num=$("#list_num").val(),count=0,index=1;index<=delete_num;index++)1==$("#delete_"+index+":checked").prop("checked")&&(count+=1);0!=count?(delete_num==count?($("#select_all").css("display","none"),$("#deselect_all").css("display","block")):($("#select_all").css("display","block"),$("#deselect_all").css("display","none")),$("#delete_button_disabled").css("display","none"),$("#delete_button").css("display","block")):($("#delete_button_disabled").css("display","block"),$("#delete_button").css("display","none"),$("#select_all").css("display","block"),$("#deselect_all").css("display","none"))}function section_show_delete_button(e,t){if(0!=$("#list_sub_num_"+t).val())if(start=parseInt(e)+1,end=parseInt(e)+parseInt($("#list_sub_num_"+t).val()),1==$("#delete_"+e+":checked").prop("checked"))for(ind=start;ind<=end;ind++)$("#delete_"+ind).prop("checked",!0);else for(ind=start;ind<=end;ind++)$("#delete_"+ind).prop("checked",!1);else 0!=$("#list_parent_"+t).val()&&1!=$("#delete_"+e+":checked").prop("checked")&&$("#delete_"+$("#list_parent_"+t).val()).prop("checked",!1);for(delete_num=$("#list_num").val(),count=0,index=1;index<=delete_num;index++)1==$("#delete_"+index+":checked").prop("checked")&&(count+=1);0!=count?(delete_num==count?($("#select_all").css("display","none"),$("#deselect_all").css("display","block")):($("#select_all").css("display","block"),$("#deselect_all").css("display","none")),$("#delete_button_disabled").css("display","none"),$("#delete_button").css("display","block")):($("#delete_button_disabled").css("display","block"),$("#delete_button").css("display","none"),$("#select_all").css("display","block"),$("#deselect_all").css("display","none"))}function confirm_multi_delete(e,t,a,_){$("#light_box").load("inc/confirm_multi_delete.php?fil="+e+"&dat="+t+"&pag="+a+"&del_fil="+_),element_in("black_back"),element_in("light_box")}function undo_multi_delete(e,t,a){element_out("black_back"),element_out("light_box"),load_page(e,t,a)}function multi_delete(e,t,a,_){element_out("light_box"),element_out("black_back"),element_out("in_page"),element_in("blank_back"),element_in("delete_inner_box"),delete_element(e,t,a,_,1)}function delete_element(e,t,a,_,i){if(list_num=$("#list_num").val(),last_delete=parseInt(list_num)+1,i==last_delete)element_out("blank_back"),element_out("delete_inner_box"),setTimeout(function(){window.location="?fil="+e+"&dat="+t+"&pag="+a},300);else{if(1==$("#delete_"+i+":checked").prop("checked"))return id=$("#delete_"+i+":checked").val(),$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/"+_+".php",data:{id:id},success:function(l){delete_element(e,t,a,_,i+1)}}),!1;delete_element(e,t,a,_,i+1)}}function confirm_delete(e,t,a,_){$("#light_box").load("inc/confirm_delete.php?fil="+e+"&dat="+t+"&pag="+a+"&del_fil="+_),element_in("black_back"),element_in("light_box")}function undo_delete(e,t,a){element_out("black_back"),element_out("light_box"),load_page(e,t,a)}function delete_this(e,t,a,_){return element_out("black_back"),element_out("light_box"),element_out("in_page"),element_in("blank_back"),element_in("delete_inner_box"),values=t.split("___"),id=values[1],parent_id=values[0],$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/"+_+".php",data:{id:id,parent_id:parent_id},success:function(){element_out("blank_back"),element_out("delete_inner_box"),setTimeout(function(){"attribute_sets_edit"==e?(ids=t.split("___"),id=ids[0],window.location="?fil="+e+"&dat="+id+"&pag="+a):"forms_edit"==e?(ids=t.split("___"),id=ids[0],form_type=$("#form_type").val(),window.location="?fil="+e+"&dat="+form_type+"___"+id+"&pag="+a):window.location="?fil="+e+"&dat="+t+"&pag="+a},300)}}),!1}function send_error(e){if(error=0,cod=$("#code_error").val().replace(/^\s+|\s+$/g,""),dom=$("#dom_error").val().replace(/^\s+|\s+$/g,""),ver=$("#ver_error").val().replace(/^\s+|\s+$/g,""),php=$("#php_error").val().replace(/^\s+|\s+$/g,""),ip=$("#ip_error").val().replace(/^\s+|\s+$/g,""),lic=$("#lic_error").val().replace(/^\s+|\s+$/g,""),mis=$("#missing_files").val().replace(/^\s+|\s+$/g,""),licregex=/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/i,""==lic?(errorform("lic_error","js_required_field_err",""),document.getElementById("lic_error").style.borderColor="#d70000",error=1):""!=lic&&1==e&&(licregex.test(lic)||(errorform("lic_error","js_lic_format_err",""),document.getElementById("lic_error").style.borderColor="#d70000",error=1)),att=$("#att_error").val().replace(/^\s+|\s+$/g,""),attregex=/^[a-zA-Z0-9]{20}$/i,""==att?(errorform("att_error","js_required_field_err",""),document.getElementById("att_error").style.borderColor="#d70000",error=1):""!=lic&&1==e&&(attregex.test(att)||(errorform("att_error","js_att_format_err",""),document.getElementById("att_error").style.borderColor="#d70000",error=1)),0==error){var t={cod:cod,ver:ver,dom:dom,ip:ip,php:php,att:att,lic:lic};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/install_error_json.php",data:t,success:function(e){$("#page_content").load("functions/install_error_inc.php?err="+cod+"&ver="+ver+"&dom="+dom+"&serverip="+ip+"&phpver="+php+"&lic="+lic+"&att="+att+"&mis="+mis+"&getcall="+e)}}),!1}}function check_license(){if(error=0,dom=$("#dom").val().replace(/^\s+|\s+$/g,""),ver=$("#ver").val().replace(/^\s+|\s+$/g,""),php=$("#php").val().replace(/^\s+|\s+$/g,""),ip=$("#ip").val().replace(/^\s+|\s+$/g,""),lic=$("#lic").val().replace(/^\s+|\s+$/g,""),licregex=/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/i,""==lic?(errorform("lic","js_required_field_err",""),document.getElementById("lic").style.borderColor="#d70000",error=1):""!=lic&&(licregex.test(lic)||(errorform("lic","js_lic_format_err",""),document.getElementById("lic").style.borderColor="#d70000",error=1)),att=$("#att").val().replace(/^\s+|\s+$/g,""),attregex=/^[a-zA-Z0-9]{20}$/i,""==att?(errorform("att","js_required_field_err",""),document.getElementById("att").style.borderColor="#d70000",error=1):""!=lic&&(attregex.test(att)||(errorform("att","js_att_format_err",""),document.getElementById("att").style.borderColor="#d70000",error=1)),0==error){element_in("black_back"),element_in("loading");var e={att:att,lic:lic,dom:dom,ver:ver,php:php,ip:ip};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/install_1_license_check.php",data:e,success:function(e){results=e.split("---"),"550"==results[0]?(element_out("black_back"),element_out("loading"),$("#page_content").load("functions/install_error_inc.php?err="+results[0]+"&ver="+ver+"&dom="+dom+"&serverip="+ip+"&phpver="+php+"&lic="+lic+"&att="+att)):"912"==results[0]?(element_out("black_back"),element_out("loading"),$("#page_content").load("functions/install_error_inc.php?err="+results[0]+"&ver="+ver+"&dom="+dom+"&serverip="+ip+"&phpver="+php+"&lic="+lic+"&att="+att)):"917"==results[0]?(element_out("black_back"),element_out("loading"),$("#page_content").load("functions/install_error_inc.php?err="+results[0]+"&ver="+ver+"&dom="+dom+"&serverip="+ip+"&phpver="+php+"&lic="+lic+"&att="+att)):"935"==results[0]?(license_alert=load_text("install_2_error_domain"),element_out("black_back"),element_out("loading"),element_out("license_alert"),element_in("license_alert"),document.getElementById("license_alert").innerHTML=license_alert,errorform("att","js_att_err",""),errorform("lic","js_lic_err",""),document.getElementById("att").style.borderColor="#d70000",document.getElementById("lic").style.borderColor="#d70000"):"944"==results[0]?(license_alert=load_text("install_2_error_license"),element_out("black_back"),element_out("loading"),element_out("license_alert"),element_in("license_alert"),document.getElementById("license_alert").innerHTML=license_alert,errorform("att","js_att_err",""),errorform("lic","js_lic_err",""),document.getElementById("att").style.borderColor="#d70000",document.getElementById("lic").style.borderColor="#d70000"):"962"==results[0]?(license_alert=load_text("install_2_error_license"),element_out("black_back"),element_out("loading"),element_out("license_alert"),element_in("license_alert"),document.getElementById("license_alert").innerHTML=license_alert,errorform("att","js_att_err",""),errorform("lic","js_lic_err",""),document.getElementById("att").style.borderColor="#d70000",document.getElementById("lic").style.borderColor="#d70000"):"996"==results[0]?(license_alert=load_text("install_2_error_info"),element_out("black_back"),element_out("loading"),element_out("license_alert"),element_in("license_alert"),document.getElementById("license_alert").innerHTML=license_alert,errorform("att","js_att_err",""),errorform("lic","js_lic_err",""),document.getElementById("att").style.borderColor="#d70000",document.getElementById("lic").style.borderColor="#d70000"):"993"==results[0]?(element_out("black_back"),element_out("loading"),$("#page_content").load("functions/install_error_inc.php?err="+results[0])):"452"==results[0]?(element_out("black_back"),element_out("loading"),$("#page_content").load("functions/install_error_inc.php?err="+results[0])):"000"==results[0]?window.location="":"666"==results[0]&&""!=results[1]?(setTimeout(function(){element_out("loading")},500),setTimeout(function(){element_out("black_back"),$("#code_save").val(results[1]),$("#lic_save").val(lic),document.getElementById("welcome_2").style.display="none",document.getElementById("welcome_3").style.display="block"},1e3)):(license_alert=load_text("install_2_error_info"),element_out("black_back"),element_out("loading"),element_out("license_alert"),element_in("license_alert"),document.getElementById("license_alert").innerHTML=license_alert,errorform("att","js_att_err",""),errorform("lic","js_lic_err",""),document.getElementById("att").style.borderColor="#d70000",document.getElementById("lic").style.borderColor="#d70000")}}),!1}}function db_check_save(){error=0,dbname=$("#dbname").val().replace(/^\s+|\s+$/g,"");""==dbname?(errorform("dbname","js_required_field_err",""),document.getElementById("dbname").style.borderColor="#d70000",error=1):0==/^[a-zA-Z0-9_ ]+$/.test(dbname)&&(errorform("dbname","js_char_db_err",""),document.getElementById("dbname").style.borderColor="#d70000",error=1),hostname=$("#hostname").val().replace(/^\s+|\s+$/g,"");""==hostname?(errorform("hostname","js_required_field_err",""),document.getElementById("hostname").style.borderColor="#d70000",error=1):0==/^[a-zA-Z0-9.:]+$/.test(hostname)&&(errorform("hostname","js_char_data_err",""),document.getElementById("hostname").style.borderColor="#d70000",error=1),username=$("#username").val().replace(/^\s+|\s+$/g,"");""==username?(errorform("username","js_required_field_err",""),document.getElementById("username").style.borderColor="#d70000",error=1):0==/^[a-zA-Z0-9_]+$/.test(username)&&(errorform("username","js_char_data_err",""),document.getElementById("username").style.borderColor="#d70000",error=1),password=$("#password").val().replace(/^\s+|\s+$/g,"");if(""==password?(errorform("password","js_required_field_err",""),document.getElementById("password").style.borderColor="#d70000",error=1):0==/^[a-zA-Z0-9!?,.;@$()\[\]{}%&#^~*+=\-_ ]+$/.test(password)&&(errorform("password","js_char_dbpsw_err",""),document.getElementById("password").style.borderColor="#d70000",error=1),dom=$("#dom").val(),ver=$("#ver").val(),php=$("#php").val(),ip=$("#ip").val(),code=$("#code_save").val(),lic=$("#lic_save").val(),0==error){element_in("black_back"),element_in("loading");var e={dbname:dbname,hostname:hostname,username:username,password:password,dom:dom,ver:ver,php:php,ip:ip,code:code,lic:lic};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/install_1_db_save.php",data:e,success:function(e){1==e?(element_out("black_back"),element_out("loading"),document.getElementById("install-alert").innerHTML=load_text("install_1_permission"),document.getElementById("install-alert").style.display="block"):2==e?(element_out("black_back"),element_out("loading"),document.getElementById("install-alert").innerHTML=load_text("install_1_wrong_data"),document.getElementById("install-alert").style.display="block"):3==e?(element_out("black_back"),element_out("loading"),document.getElementById("install-alert").innerHTML=load_text("install_1_no_db"),document.getElementById("install-alert").style.display="block"):4==e?(element_out("black_back"),element_out("loading"),document.getElementById("install-alert").innerHTML=load_text("install_1_no_lic"),document.getElementById("install-alert").style.display="block"):setTimeout(function(){element_out("loading"),window.location=""},1e3)}}),!1}}function customization_save_check(e,t,a){var _,i;if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,window.FileReader){if(!(_=document.getElementById("input_image_logo")).files[0])return customization_save(e,t,a),!1;if(_.files)if(i=_.files[0],""!=$("#max_image_upload_px").val().replace(/^\s+|\s+$/g,"")?(max_image_upload_size_b=1048576*$("#max_image_upload_size").val(),max_image_upload_size_mb=$("#max_image_upload_size").val()):(max_image_upload_size_b=5242880,max_image_upload_size_mb=5),i.size>max_image_upload_size_b)errorimageform("logo","js_max_filesize_err",max_image_upload_size_mb+"MB"),error=1;else{""!=$("#max_image_upload_px").val().replace(/^\s+|\s+$/g,"")?image_upload_pixel_limit=$("#max_image_upload_px").val():image_upload_pixel_limit=4e3;var l=new FileReader;l.onload=function(_){var i=new Image;if(i.src=_.target.result,i.complete){if(!(i.height>image_upload_pixel_limit||i.width>image_upload_pixel_limit))return customization_save(e,t,a),!1;errorimageform("logo","js_max_imagesize_err",image_upload_pixel_limit+"x"+image_upload_pixel_limit+" px"),error=1}else i.onload=function(){if(!(i.height>image_upload_pixel_limit||i.width>image_upload_pixel_limit))return customization_save(e,t,a),!1;errorimageform("logo","js_max_imagesize_err",image_upload_pixel_limit+"x"+image_upload_pixel_limit+" px"),error=1}},l.readAsDataURL(_.files[0])}else alert(load_text("js_browser_err"))}else alert(load_text("js_api_err"))}function customization_save(e,t,a){if(error=0,custom_color=$("#custom_color").val().replace(/^\s+|\s+$/g,""),""!=custom_color){first_char=custom_color.substring(0,1),last_chars=custom_color.substring(1,7);0==/^[#]+$/.test(first_char)&&(errorform("custom_color","js_color_error",""),document.getElementById("custom_color").style.borderColor="#d70000",error=1),0==/^[a-fA-F0-9]+$/.test(last_chars)&&(errorform("custom_color","js_color_error",""),document.getElementById("custom_color").style.borderColor="#d70000",error=1),7!=custom_color.length&&(errorform("custom_color","js_color_error",""),document.getElementById("custom_color").style.borderColor="#d70000",error=1)}if(0==error){saving_process();var _={string_value:"input_image_logo",delete_image:$("#delete_image_logo").val(),custom_color:custom_color};return $.ajaxSetup({cache:!1}),$.ajaxFileUpload({url:"functions/customization_save.php",secureuri:!1,type:"POST",fileElementId:"input_image_logo",dataType:"json",data:_,success:function(t,a){error=t.error.split("___"),1==error[0]?saving_error():saved_redirect("?fil="+e,""),"ko"==error[1]?(saving_error(),document.getElementById("input-alert_"+attribute_id).style.display="block"):saved_redirect("?fil="+e,"")},error:function(e,t,a){alert(a),saving_error()}}),!1}}function settings_save_check(e,t,a){if(error=0,pixel_limit=$("#pixel_limit").val().replace(/^\s+|\s+$/g,""),used_pixel_limit=parseInt($("#max_image_used_px").val()),""!=pixel_limit?(pixel_limit=parseInt(pixel_limit),isNaN(pixel_limit)&&(errorform("pixel_limit","js_number_value_err",""),error=1),pixel_limit<used_pixel_limit&&(errorform("pixel_limit","js_empty_data_min_err","("+used_pixel_limit+" px)."),error=1)):used_pixel_limit>4e3&&(errorform("pixel_limit","js_empty_data_min_err","("+used_pixel_limit+" px)."),error=1),image_limit=$("#image_limit").val().replace(/^\s+|\s+$/g,""),""!=image_limit&&isNaN(image_limit)&&(errorform("image_limit","js_number_value_err",""),error=1),file_limit=$("#file_limit").val().replace(/^\s+|\s+$/g,""),""!=file_limit&&isNaN(file_limit)&&(errorform("file_limit","js_number_value_err",""),error=1),0==error){saving_process(),image_upload_quality=$("#image_upload_quality").val(),pixel_limit=$("#pixel_limit").val().replace(/^\s+|\s+$/g,""),image_limit=$("#image_limit").val().replace(/^\s+|\s+$/g,""),file_limit=$("#file_limit").val().replace(/^\s+|\s+$/g,"");var _={pixel_limit:pixel_limit,image_limit:image_limit,file_limit:file_limit,image_upload_quality:image_upload_quality};return $.ajaxSetup({cache:!1}),$.ajaxFileUpload({url:"functions/settings_save.php",secureuri:!1,type:"POST",dataType:"json",data:_,success:function(t){1==t?saving_error():saved_redirect("?fil="+e,"")}}),!1}}function languages_status(e,t,a){saving_process();var _={id:e,status:t};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/languages_status.php",data:_,success:function(_){error=_,0==error?saved_redirect("1"==t?"?fil=languages_setting&dat="+e+"___1":"?fil="+a,""):saving_error()}}),!1}function languages_save(e,t){if(error=0,list=$("#list").val(),"2"==list)for(f=2;f<=$("#num_field").val();f++)""==$("#string_value_"+f).val().replace(/^\s+|\s+$/g,"")&&(errorform("string_value_"+f,"js_required_field_err",""),error=1);if("3"==list)for(f=2;f<=$("#num_field").val();f++)""==$("#string_value_"+f).val().replace(/^\s+|\s+$/g,"")&&(errorform("string_value_"+f,"js_required_field_err",""),error=1);if(0==error){saving_process();var a,_={id:t,num_field:$("#num_field").val(),num_lan:$("#num_lan").val(),list:$("#list").val()};if("1"==list)for(a=1;a<=$("#num_lan").val();a++){var i="string_value_1_"+a,l=(l=escapeHtml($("#string_value_1_"+a).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");_[i]=l;i="lan_1_"+a,l=$("#lan_1_"+a).val();_[i]=l}if("2"==list)for(f=2;f<=$("#num_field").val();f++){i="string_value_"+f,l=(l=escapeHtml($("#string_value_"+f).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");_[i]=l;i="content_position_"+f,l=$("#content_position_"+f).val();_[i]=l}if("3"==list)for(f=2;f<=$("#num_field").val();f++){i="string_value_"+f,l=(l=escapeHtml($("#string_value_"+f).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");_[i]=l;i="content_position_"+f,l=$("#content_position_"+f).val();_[i]=l}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/languages_save.php",data:_,success:function(e){error=e,1==error?saving_error():saved_redirect("?fil=languages_list","")}}),!1}}function user_save_check(e,t,a,_){document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,installing=$("#installing").val(),email=$("#email").val().replace(/\s/g,""),""==email?(errorform("email","js_required_field_err",""),error=1):email.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)||(errorform("email","js_char_email_err",""),error=1),username=$("#username").val().replace(/^\s+|\s+$/g,"");""==username?(errorform("username","js_required_field_err",""),error=1):0==/^[a-zA-Z0-9_]+$/.test(username)&&(errorform("username","js_char_data_err",""),error=1),password=$("#password").val().replace(/^\s+|\s+$/g,"");if(1==installing&&""==password&&(errorform("password","js_required_field_err",""),error=1),""!=password&&0==/^[a-zA-Z0-9_]+$/.test(password)&&(errorform("password","js_char_data_err",""),error=1),0==error){var i={id:_,username:username,email:email};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_save_check.php",data:i,success:function(i){error=0,results=i.split(","),results.forEach(function(e){""!=e&&("username"==e&&(errorform(e,"js_in_use_data_username_err",""),error=1),"email"==e&&(errorform(e,"js_in_use_data_email_err",""),error=1))}),0==error&&user_save(e,t,a,_)}}),!1}}function user_save(e,t,a,_){saving_process(),email=$("#email").val().replace(/^\s+|\s+$/g,""),username=$("#username").val().replace(/^\s+|\s+$/g,""),password=$("#password").val().replace(/^\s+|\s+$/g,""),installing=0;var i={id:_,username:username,password:password,email:email,installing:installing};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_save.php",data:i,success:function(t){datas=t.split(","),error=datas[0],0==error?saved_redirect("users_edit"==e?"?fil=users_list":"?fil="+e,""):saving_error()}}),!1}function user_status(e,t){var a={id:e,status:t};$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_status.php",data:a,success:function(e){error=e,0==error?saved_redirect("?fil=users_list",""):saving_error()}})}function user_switch(e){var t={id:e};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_switch.php",data:t,success:function(){window.location=""}}),!1}function user_switch_back(){return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_switch_back.php",success:function(){window.location="?fil=users_list"}}),!1}function user_save_install_check(e,t,a,_){document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,email=$("#email").val().replace(/\s/g,""),""==email?(errorform("email","js_required_field_err",""),error=1):email.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)||(errorform("email","js_char_email_err",""),error=1),username=$("#username").val().replace(/^\s+|\s+$/g,"");""==username?(errorform("username","js_required_field_err",""),error=1):0==/^[a-zA-Z0-9_]+$/.test(username)&&(errorform("username","js_char_data_err",""),error=1),password=$("#password").val().replace(/^\s+|\s+$/g,"");if(""==password&&(errorform("password","js_required_field_err",""),error=1),0==/^[a-zA-Z0-9_]+$/.test(password)&&(errorform("password","js_char_data_err",""),error=1),0==error){var i={id:_,username:username,email:email};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_save_install_check.php",data:i,success:function(i){error=0,results=i.split(","),results.forEach(function(e){""!=e&&("username"==e&&(errorform(e,"js_in_use_data_username_err",""),error=1),"email"==e&&(errorform(e,"js_in_use_data_email_err",""),error=1))}),0==error&&user_save_install(e,t,a,_)}}),!1}}function user_save_install(e,t,a,_){element_in("black_back"),element_in("loading"),email=$("#email").val().replace(/^\s+|\s+$/g,""),username=$("#username").val().replace(/^\s+|\s+$/g,""),password=$("#password").val().replace(/^\s+|\s+$/g,""),language=$("#language").val();var i={id:_,username:username,password:password,email:email,language:language};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/user_save_install.php",data:i,success:function(e){datas=e.split(","),error=datas[0],0==error?1==datas[3]?window.location.href="https://www.getradice.com/free-trial-attivata?cl="+datas[4]:(data_message='<div class="light_box_container"><div class="light_box_content_small"><span class="install_lightbox_title">'+load_text("js_installation_completed_title")+'</span><br/><span class="install_lightbox_p">'+load_text("js_installation_completed_p")+"</span></div></div>",setTimeout(function(){element_out("loading")},500),setTimeout(function(){document.getElementById("light_box").innerHTML=data_message,element_in("light_box")},800),setTimeout(function(){window.location=""},3e3)):saving_error()}}),!1}function framework_text_counter(e,t){$("#"+e).val().length>t&&($("#"+e).val($("#"+e).val().slice(0,t)),errorform(e,"js_max_value_err","")),$("#counter_"+e).text($("#"+e).val().length)}function attributes_save_check(e,t,a){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,values=t.split("___"),attribute_set_id=values[1],a=values[2],label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),max_image_upload_px=parseInt($("#max_image_upload_px").val()),opt_img_width=parseInt($("#opt_img_width").val().replace(/^\s+|\s+$/g,"")),opt_img_height=parseInt($("#opt_img_height").val().replace(/^\s+|\s+$/g,"")),opt_img_thu_width=parseInt($("#opt_img_thu_width").val().replace(/^\s+|\s+$/g,"")),opt_img_thu_height=parseInt($("#opt_img_thu_height").val().replace(/^\s+|\s+$/g,"")),label_related="",opt_wysiwyg_width=parseInt($("#opt_wysiwyg_width").val().replace(/^\s+|\s+$/g,"")),opt_wysiwyg_height=parseInt($("#opt_wysiwyg_height").val().replace(/^\s+|\s+$/g,"")),opt_notes=escapeHtml($("#notes").val().replace(/^\s+|\s+$/g,"")),""==label&&(errorform("label","js_required_field_err",""),error=1),1==$("#opt_notes:checked").prop("checked")&&""==opt_notes&&(errorform("notes","js_required_field_err",""),error=1),attribute_type_id=$("#attribute_type_id").val(),0==attribute_type_id&&(errorattributeform("attribute_type_id","js_sel_err",""),error=1),2==attribute_type_id&&(isNaN($("#opt_max_lenght").val().replace(/^\s+|\s+$/g,""))&&(errorform("opt_max_lenght","js_number_value_err",""),error=1),1==$("#opt_max_lenght_selector").val()&&""==$("#opt_max_lenght").val()&&(errorform("opt_max_lenght","js_required_field_err",""),error=1)),3==attribute_type_id&&(isNaN($("#opt_max_lenght").val().replace(/^\s+|\s+$/g,""))&&(errorform("opt_max_lenght","js_number_value_err",""),error=1),1==$("#opt_max_lenght_selector").val()&&""==$("#opt_max_lenght").val()&&(errorform("opt_max_lenght","js_required_field_err",""),error=1)),5==attribute_type_id&&(isNaN($("#opt_img_width").val().replace(/^\s+|\s+$/g,""))&&(errorform("opt_img_width","js_number_value_err",""),error=1),isNaN($("#opt_img_height").val().replace(/^\s+|\s+$/g,""))&&(errorform("opt_img_height","js_number_value_err",""),error=1),"2"==$("#image_type").val()&&(""==$("#opt_img_width").val().replace(/^\s+|\s+$/g,"")&&(errorform("opt_img_width","js_empty_data_err",""),error=1),""==$("#opt_img_height").val().replace(/^\s+|\s+$/g,"")&&(errorform("opt_img_height","js_empty_data_err",""),error=1)),isNaN($("#opt_img_thu_width").val().replace(/^\s+|\s+$/g,""))&&(errorform("opt_img_thu_width","js_number_value_err",""),error=1),isNaN($("#opt_img_thu_height").val().replace(/^\s+|\s+$/g,""))&&(errorform("opt_img_thu_height","js_number_value_err",""),error=1),"2"==$("#thumbnail_type").val()&&(""==$("#opt_img_thu_width").val().replace(/^\s+|\s+$/g,"")&&(errorform("opt_img_thu_width","js_empty_data_err",""),error=1),""==$("#opt_img_thu_height").val().replace(/^\s+|\s+$/g,"")&&(errorform("opt_img_thu_height","js_empty_data_err",""),error=1)),""!=opt_img_width&&opt_img_width>max_image_upload_px&&(errorform("opt_img_width","js_empty_data_max_err","("+max_image_upload_px+"x"+max_image_upload_px+" px)."),error=1),""!=opt_img_height&&opt_img_height>max_image_upload_px&&(errorform("opt_img_height","js_empty_data_max_err","("+max_image_upload_px+"x"+max_image_upload_px+" px)."),error=1),""!=opt_img_thu_width&&opt_img_thu_width>max_image_upload_px&&(errorform("opt_img_thu_width","js_empty_data_max_err","("+max_image_upload_px+"x"+max_image_upload_px+" px)."),error=1),""!=opt_img_thu_height&&opt_img_thu_height>max_image_upload_px&&(errorform("opt_img_thu_height","js_empty_data_max_err","("+max_image_upload_px+"x"+max_image_upload_px+" px)."),error=1)),12==attribute_type_id&&1==$("#opt_wysiwyg:checked").prop("checked")&&0==$("#shared_exists").val()&&(label_related=escapeHtml($("#label_related").val().replace(/^\s+|\s+$/g,"")),""==label_related&&(errorform("label_related","js_required_field_err",""),error=1),label_attribute=escapeHtml($("#label_attribute").val().replace(/^\s+|\s+$/g,"")),""==label_attribute&&(errorform("label_attribute","js_required_field_err",""),error=1),""!=opt_wysiwyg_width&&opt_wysiwyg_width>max_image_upload_px&&(errorform("opt_wysiwyg_width","js_empty_data_max_err","("+max_image_upload_px+"x"+max_image_upload_px+" px)."),error=1),""!=opt_wysiwyg_height&&opt_wysiwyg_height>max_image_upload_px&&(errorform("opt_wysiwyg_height","js_empty_data_max_err","("+max_image_upload_px+"x"+max_image_upload_px+" px)."),error=1)),15==attribute_type_id&&(0==$("#related_attribute_set").val()&&(errorform("related_attribute_set","js_related_err",""),error=1),"new"==$("#related_attribute_set").val()&&(label_related=escapeHtml($("#label_related").val().replace(/^\s+|\s+$/g,"")),""==label_related&&(errorform("label_related","js_required_field_err",""),error=1))),0==error){var _={id:a,attribute_set_id:attribute_set_id,label:label,label_related:label_related};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attributes_save_check.php",data:_,success:function(_){results=_.split("___"),error=0,""!=results[0]&&(errorform(results[0],"js_in_use_data_attribute_err",""),error=1),""!=results[1]&&(errorform(results[1],"js_in_use_data_section_err",""),error=1),0==error&&attributes_save(e,t,a)}}),!1}}function attributes_save(e,t,a){saving_process(),values=t.split("___"),section_parent_id=values[0],section_self_id=values[1],a=values[2],label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),attribute_options="",label_related="",attribute_set_id_new="",group_id_new="",label_attribute="",opt_wysiwyg_width="",opt_wysiwyg_height="",opt_notes="",1==$("#opt_notes:checked").prop("checked")&&(opt_notes=escapeHtml($("#notes").val().replace(/^\s+|\s+$/g,""))),2==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,1==$("#opt_unique:checked").prop("checked")?opt_unique=1:opt_unique=0,opt_max_lenght=$("#opt_max_lenght").val(),1==$("#opt_language:checked").prop("checked")?opt_language=1:opt_language=0,attribute_options=opt_required+"___"+opt_unique+"___"+opt_max_lenght+"___"+opt_language),3==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,opt_max_lenght=$("#opt_max_lenght").val(),attribute_options=opt_required+"___"+opt_max_lenght),5==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,image_type=$("#image_type").val(),opt_img_width=$("#opt_img_width").val(),opt_img_height=$("#opt_img_height").val(),1==$("#opt_keep_size:checked").prop("checked")?opt_keep_size=1:opt_keep_size=0,""==opt_img_width&&""==opt_img_height&&(opt_keep_size=0),thumbnail_type=$("#thumbnail_type").val(),opt_img_thu_width=$("#opt_img_thu_width").val(),opt_img_thu_height=$("#opt_img_thu_height").val(),0==thumbnail_type&&(opt_img_thu_width="",opt_img_thu_height=""),attribute_options=opt_required+"___"+image_type+"___"+opt_img_width+"___"+opt_img_height+"___"+thumbnail_type+"___"+opt_img_thu_width+"___"+opt_img_thu_height+"___"+opt_keep_size),6==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,opt_date_format=$("#opt_date_format").val(),attribute_options=opt_required+"___"+opt_date_format),7==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,opt_date_time_format=$("#opt_date_time_format").val(),attribute_options=opt_required+"___"+opt_date_time_format),8==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,attribute_options=opt_required),9==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,attribute_options=opt_required),12==attribute_type_id&&(attribute_options="0___0",1==$("#opt_wysiwyg:checked").prop("checked")&&(label_related="",group_id_new="",label_attribute="",opt_wysiwyg_width="",opt_wysiwyg_height="",0==$("#shared_exists").val()&&(label_related=escapeHtml($("#label_related").val().replace(/^\s+|\s+$/g,"")),group_id_new=$("#group_id").val(),label_attribute=escapeHtml($("#label_attribute").val().replace(/^\s+|\s+$/g,"")),opt_wysiwyg_width=$("#opt_wysiwyg_width").val(),opt_wysiwyg_height=$("#opt_wysiwyg_height").val()),attribute_options="0___1")),13==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,attribute_options=opt_required),15==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,related_attribute_set=$("#related_attribute_set").val(),0!=related_attribute_set?relation_type=$("#relation_type").val():relation_type=0,attribute_options=opt_required+"___"+related_attribute_set+"___"+relation_type,"new"==$("#related_attribute_set").val()&&(label_related=escapeHtml($("#label_related").val().replace(/^\s+|\s+$/g,"")),attribute_set_id_new=$("#attribute_set_id").val(),group_id_new=$("#group_id").val())),17==attribute_type_id&&(1==$("#opt_required:checked").prop("checked")?opt_required=1:opt_required=0,attribute_options=opt_required);var _={id:a,label:label,attribute_type_id:$("#attribute_type_id").val(),attribute_set_id:section_self_id,attribute_options:attribute_options,label_related:label_related,attribute_set_id_new:attribute_set_id_new,group_id_new:group_id_new,label_attribute:label_attribute,opt_wysiwyg_width:opt_wysiwyg_width,opt_wysiwyg_height:opt_wysiwyg_height,opt_notes:opt_notes};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attributes_save.php",data:_,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=attribute_sets_edit&dat="+section_parent_id+"___"+section_self_id,""):saving_error()}}),!1}function check_attribute_type(e,t){""==t&&($("#attribute_type_id").val(e),$(".attribute_type_box").removeClass("attribute_type_box_active"),$("#attribute_type_box-"+e).addClass("attribute_type_box_active")),0==e&&(document.getElementById("opt_required_box").style.display="none",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),2==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="block",document.getElementById("opt_max_lenght_box").style.display="block",document.getElementById("opt_language_box").style.display="block",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),3==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="block",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),5==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="block",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),6==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="block",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),7==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="block",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),8==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),9==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),11==e&&(document.getElementById("opt_required_box").style.display="none",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),12==e&&(document.getElementById("opt_required_box").style.display="none",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="block",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none"),13==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),15==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="block",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),17==e&&(document.getElementById("opt_required_box").style.display="block",document.getElementById("opt_unique_box").style.display="none",document.getElementById("opt_max_lenght_box").style.display="none",document.getElementById("opt_language_box").style.display="none",document.getElementById("opt_img_box").style.display="none",document.getElementById("opt_date_format_box").style.display="none",document.getElementById("opt_date_time_format_box").style.display="none",document.getElementById("opt_correlate_box").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none",document.getElementById("opt_wysiwyg_box").style.display="none",document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none",$("#opt_wysiwyg").prop("checked",!1)),document.getElementById("opt_notes_box").style.display="block",15==e?$("#save_type").val("2"):$("#save_type").val("1"),set_edit_buttons()}function show_opt_notes(){1==$("#opt_notes:checked").prop("checked")?document.getElementById("opt_attribute_notes").style.display="block":document.getElementById("opt_attribute_notes").style.display="none"}function enable_wysiwyg_img(){1==$("#opt_wysiwyg:checked").prop("checked")?0==$("#shared_exists").val()?(document.getElementById("opt_wysiwyg_info").style.display="inline-block",document.getElementById("label_related_box").style.display="block",document.getElementById("opt_wysiwyg_fields").style.display="block"):(document.getElementById("opt_wysiwyg_info").style.display="inline-block",document.getElementById("label_related_box").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none"):(document.getElementById("opt_wysiwyg_info").style.display="none",document.getElementById("label_related_box").style.display="none",document.getElementById("opt_wysiwyg_fields").style.display="none")}function change_upload_type(e,t){0==e&&(document.getElementById(t+"_width_box").style.display="none",document.getElementById(t+"_height_box").style.display="none"),1==e&&(document.getElementById(t+"_width_label").innerHTML=load_text("attribute_set_edit_attribute_options_max_width"),document.getElementById(t+"_height_label").innerHTML=load_text("attribute_set_edit_attribute_options_max_height"),document.getElementById(t+"_width_box").style.display="block",document.getElementById(t+"_height_box").style.display="block"),2==e&&(document.getElementById(t+"_width_label").innerHTML=load_text("attribute_set_edit_attribute_options_width"),document.getElementById(t+"_height_label").innerHTML=load_text("attribute_set_edit_attribute_options_height"),document.getElementById(t+"_width_box").style.display="block",document.getElementById(t+"_height_box").style.display="block"),1!=e&&2!=e||"thumbnail"==t&&(""==$("#opt_img_thu_width").val()&&($("#max_image_upload_px").val()>="240"?$("#opt_img_thu_width").val("240"):$("#opt_img_thu_width").val($("#max_image_upload_px").val())),""==$("#opt_img_thu_height").val()&&($("#max_image_upload_px").val()>="180"?$("#opt_img_thu_height").val("180"):$("#opt_img_thu_height").val($("#max_image_upload_px").val()))),0!=e&&1!=e||("fullsize"==t&&(restore_simple_input("opt_img_width"),restore_simple_input("opt_img_height")),"thumbnail"==t&&(restore_simple_input("opt_img_thu_width"),restore_simple_input("opt_img_thu_height")))}function show_keep_size(){""!=$("#opt_img_width").val()||""!=$("#opt_img_height").val()?document.getElementById("keep_size_box").style.display="block":document.getElementById("keep_size_box").style.display="none"}function select_related(e){"new"==e?(document.getElementById("label_related_box").style.display="block",1==$("#relation_type").val()?document.getElementById("related_parent_box").style.display="block":document.getElementById("related_parent_box").style.display="none"):(document.getElementById("label_related_box").style.display="none",document.getElementById("related_parent_box").style.display="none")}function refresh_attribute_set_list(e,t,a){$("#related_attribute_set_box").load("inc/related_attribute_set.php?section_parent_id="+e+"&section_self_id="+t+"&relation_type="+a),select_related("")}function attribute_sets_permission(e,t,a,_){saving_process(),values=t.split("___"),user_id=values[0];var i={user_id:user_id,attribute_set_id:a,permission:_};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_permission.php",data:i,success:function(a){error=a,0==error?(t="permissions_edit"==e?t:user_id,saved_redirect("?fil="+e+"&dat="+t,"")):saving_error()}}),!1}function attribute_sets_limits(e,t,a,_){_=1==$("#item_quantity_"+a+":checked").prop("checked")?1:0,values=t.split("___"),user_id=values[0];var i={user_id:user_id,attribute_set_id:a,permission:_};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_limits.php",data:i,success:function(a){error=a,0==error?(t="permissions_edit"==e?t:user_id,saved_redirect("?fil="+e+"&dat="+t,"")):saving_error()}}),!1}function attributes_permission(e,t,a,_){saving_process(),values=t.split("___"),user_id=values[0],values=a.split("___"),attribute_id=values[0],attribute_set_id=values[1];var i={user_id:user_id,attribute_set_id:attribute_set_id,attribute_id:attribute_id,permission:_};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attributes_permission.php",data:i,success:function(a){error=a,0==error?saved_redirect("?fil="+e+"&dat="+t,""):saving_error()}}),!1}function getdate(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,_=e.getFullYear();return t<10&&(t="0"+t),a<10&&(a="0"+a),e=a+"/"+t+"/"+_}function gethours(){var e=(new Date).getHours();return e<10&&(e="0"+e),e}function getminutes(){var e=(new Date).getMinutes();return e<10&&(e="0"+e),e}function attributes_set_options_show_num(e){0==e&&(document.getElementById("num_max").value="0",document.getElementById("num_max_box").style.display="none",restore_simple_input("num_max")),1==e&&(document.getElementById("num_max").value="1",document.getElementById("num_max_box").style.display="none",restore_simple_input("num_max")),2==e&&(document.getElementById("num_max").value="",document.getElementById("num_max_box").style.display="block")}function attributes_options_show_num(e){0==e?(document.getElementById("opt_max_lenght_inner_box").style.display="none",document.getElementById("opt_max_lenght").value=""):(document.getElementById("opt_max_lenght_inner_box").style.display="block",document.getElementById("opt_max_lenght").value="")}function attribute_options_charset(e){isNaN(e)&&errorform("opt_max_lenght","js_only_numbers_err",""),"0"==$("#opt_max_lenght").val()&&errorform("opt_max_lenght","js_only_numbers_min_err","")}function attributes_set_options_show_fields(e,t,a){attribute_ids=a.split("_"),1==e?(document.getElementById("img_field").style.display="none",document.getElementById("1_field").style.display="block",document.getElementById("2_field").style.display="none",document.getElementById("3_field").style.display="none",document.getElementById("add_field").style.display="block",document.getElementById("show_this").value="2",0!=attribute_ids[2]&&""!=attribute_ids[2]&&(document.getElementById("2_field").style.display="block",document.getElementById("hide_2_field").style.display="block",document.getElementById("show_this").value="3",0!=attribute_ids[3]&&""!=attribute_ids[3]&&(document.getElementById("hide_2_field").style.display="none",document.getElementById("hide_3_field").style.display="block",document.getElementById("3_field").style.display="block",document.getElementById("add_field").style.display="none",document.getElementById("show_this").value="0")),document.getElementById("4_field").style.display="none",document.getElementById("1_field_label").innerHTML=load_text("attribute_set_edit_options_1_field_1"),document.getElementById("2_field_label").innerHTML=load_text("attribute_set_edit_options_2_field_1"),document.getElementById("3_field_label").innerHTML=load_text("attribute_set_edit_options_3_field_1"),$(".main_checkbox").css("display","block"),$(".form_label_style").css("display","block"),$(".form_insert_style").css("display","block")):2==e?(document.getElementById("img_field").style.display="block",document.getElementById("1_field").style.display="block",document.getElementById("2_field").style.display="none",document.getElementById("3_field").style.display="none",document.getElementById("4_field").style.display="none",document.getElementById("add_field").style.display="block",document.getElementById("show_this").value="2",0!=attribute_ids[2]&&""!=attribute_ids[2]&&(document.getElementById("2_field").style.display="block",document.getElementById("hide_2_field").style.display="block",document.getElementById("show_this").value="3",0!=attribute_ids[3]&&""!=attribute_ids[3]&&(document.getElementById("hide_2_field").style.display="none",document.getElementById("3_field").style.display="block",document.getElementById("hide_3_field").style.display="block",document.getElementById("show_this").value="4",0!=attribute_ids[4]&&""!=attribute_ids[4]&&(document.getElementById("hide_3_field").style.display="none",document.getElementById("4_field").style.display="block",document.getElementById("hide_4_field").style.display="block",document.getElementById("add_field").style.display="none",document.getElementById("show_this").value="0"))),document.getElementById("1_field_label").innerHTML=load_text("attribute_set_edit_options_1_field_2"),document.getElementById("2_field_label").innerHTML=load_text("attribute_set_edit_options_2_field_2"),document.getElementById("3_field_label").innerHTML=load_text("attribute_set_edit_options_3_field_2"),document.getElementById("4_field_label").innerHTML=load_text("attribute_set_edit_options_4_field_2"),$(".main_checkbox").css("display","block"),$(".form_label_style").css("display","block"),$(".form_insert_style").css("display","block")):3==e&&(document.getElementById("img_field").style.display="block",document.getElementById("1_field").style.display="block",document.getElementById("2_field").style.display="none",document.getElementById("3_field").style.display="none",document.getElementById("4_field").style.display="none",document.getElementById("1_field_label").innerHTML=load_text("attribute_set_edit_options_1_field_3"),document.getElementById("2_field_label").innerHTML="",document.getElementById("3_field_label").innerHTML="",document.getElementById("4_field_label").innerHTML="",document.getElementById("add_field").style.display="none",$(".main_checkbox").css("display","none"),$(".form_label_style").css("display","none"),$(".form_insert_style").css("display","none")),1==t&&("block"==document.getElementById("1_field").style.display?set_main_field(1):set_main_field(0)),set_edit_buttons()}function hide_field(e){prev_field=parseInt(e)-1,document.getElementById(e+"_field").style.display="none",1!=prev_field&&(document.getElementById("hide_"+prev_field+"_field").style.display="block"),document.getElementById("show_this").value=e,1==$("#view_type").val()&&"3"==e&&(document.getElementById("add_field").style.display="block"),2==$("#view_type").val()&&"4"==e&&(document.getElementById("add_field").style.display="block"),1==$("#"+e+"_field_checkbox:checked").prop("checked")&&set_main_field(1)}function add_field(){self_field=document.getElementById("show_this").value,prev_field=parseInt(self_field)-1,next_field=parseInt(self_field)+1,document.getElementById(self_field+"_field").style.display="block",document.getElementById("hide_"+self_field+"_field").style.display="block",1!=prev_field&&(document.getElementById("hide_"+prev_field+"_field").style.display="none"),document.getElementById("show_this").value=next_field,1==$("#view_type").val()&&"3"==self_field&&(document.getElementById("add_field").style.display="none"),2==$("#view_type").val()&&"4"==self_field&&(document.getElementById("add_field").style.display="none"),set_edit_buttons()}function view_type_preview(){for(element_in("black_back"),element_in("light_box"),view_type=$("#view_type").val(),styles="",attribute_ids="",quantity=0,i=1;i<=4;i++)"block"==document.getElementById(i+"_field").style.display&&(quantity++,styles=styles+$("#style_selected_"+i).val()+"_",attribute_ids=attribute_ids+$("#"+i+"_field_id").val()+"_");document.getElementById("light_box").innerHTML='<div class="light_box_container" onclick="view_type_hide_preview()"><div id="lightbox_preview" class="light_box_content_medium"></div></div>',$("#lightbox_preview").load("inc/items_list_preview.php?view_type="+view_type+"&quantity="+quantity+"&styles="+styles+"&attribute_ids="+attribute_ids)}function view_type_hide_preview(){element_out("black_back"),element_out("light_box"),document.getElementById("light_box").innerHTML=""}function show_style_list(e){"none"==document.getElementById("style_list_"+e).style.display?document.getElementById("style_list_"+e).style.display="block":document.getElementById("style_list_"+e).style.display="none"}function select_field_style(e,t){document.getElementById("field_style_title_"+e+"_field").innerHTML=document.getElementById("style_"+e+"_"+t).innerHTML+'<i class="fa fa-caret-down" aria-hidden="true"></i>',document.getElementById("style_list_"+e+"_field").style.display="none",document.getElementById("style_selected_"+e).value=t,$(".style_"+e).removeClass("active"),$("#style_"+e+"_"+t).addClass("active")}function set_main_field(e){for(ind=1;ind<=4;ind++)$("#"+ind+"_field_checkbox").prop("checked",!1);$("#"+e+"_field_checkbox").prop("checked",!0)}function attributes_set_options_show_ord_dir(e){document.getElementById("ord_dir_box").style.display=0==e?"none":"block"}function show_options_url(){1==$("#option_label:checked").prop("checked")?(document.getElementById("option_label_box").style.display="block",document.getElementById("option_input_label_box").style.display="block"):(document.getElementById("option_label_box").style.display="none",document.getElementById("option_input_label_box").style.display="none")}function attributes_set_options_url_save_check(e,t,a){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,1==$("#option_label:checked").prop("checked")){if(label=$("#label").val(),""!=label){var _={id:t,label:label};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_options_url_save_check.php",data:_,success:function(_){error=0,""!=_&&(errorform(_,"js_in_use_data_err",""),error=1),0==error&&attributes_set_options_url_save(e,t,a)}}),!1}attributes_set_options_url_save(e,t,a)}else attributes_set_options_url_save(e,t,a)}function attributes_set_options_url_save(e,t,a){saving_process(),1==$("#option_label:checked").prop("checked")?(label_option="1_"+$("#option_input_label").val(),label=$("#label").val(),""==label&&(label=load_text("attribute_set_edit_options_url_label_default"))):(label_option=0,label="");var _={id:t,label_option:label_option,label:label};$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_options_url_save.php",data:_,success:function(e){0==e?saved_redirect("?fil=attribute_sets_edit&dat="+a+"___"+t,""):saving_error()}})}function attributes_set_options_num_save_check(e,t,a){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,num_max=$("#num_max").val(),0!=$("#num_max_selector").val()?(""==num_max&&(errorform("num_max","js_required_field_err",""),error=1),isNaN(num_max)&&(errorform("num_max","js_only_numbers_err",""),error=1),"0"==num_max&&(errorform("num_max","js_only_numbers_min_err",""),error=1)):num_max=0,0==error){var _={id:t,num_max:num_max};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_options_num_save_check.php",data:_,success:function(_){error=0,""!=_&&(document.getElementById("num_max_box").style.display="block",errorform(_,"js_min_num_err",""),error=1),0==error&&attributes_set_options_num_save(e,t,a)}}),!1}}function attributes_set_options_num_save(e,t,a){saving_process(),num_max=$("#num_max").val();var _={id:t,num_max:num_max};$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_options_num_save.php",data:_,success:function(e){0==e?saved_redirect("?fil=attribute_sets_edit&dat="+a+"___"+t,""):saving_error()}})}function settings_lists_save(e,t,a){for(saving_process(),view_type=$("#view_type").val(),ind=1;ind<=4;ind++)1==$("#"+ind+"_field_checkbox:checked").prop("checked")&&(main_attribute_index=ind);label_list_attribute_id="",1==view_type?(field_1=$("#1_field_id").val(),style_selected_1=$("#style_selected_1").val(),field_2=0,style_selected_2="",field_3=0,style_selected_3="","block"==document.getElementById("2_field").style.display&&(field_2=$("#2_field_id").val(),style_selected_2=$("#style_selected_2").val()),"block"==document.getElementById("3_field").style.display&&(field_3=$("#3_field_id").val(),style_selected_3=$("#style_selected_3").val()),label_list_attribute_id="0_"+field_1+"_"+field_2+"_"+field_3+"_0",aspect_list_attribute_id="no_"+style_selected_1+"_"+style_selected_2+"_"+style_selected_3+"_"):2==view_type?(field_1=$("#1_field_id").val(),style_selected_1=$("#style_selected_1").val(),field_2=0,style_selected_2="",field_3=0,style_selected_3="",field_4=0,style_selected_4="","block"==document.getElementById("2_field").style.display&&(field_2=$("#2_field_id").val(),style_selected_2=$("#style_selected_2").val()),"block"==document.getElementById("3_field").style.display&&(field_3=$("#3_field_id").val(),style_selected_3=$("#style_selected_3").val()),"block"==document.getElementById("4_field").style.display&&(field_4=$("#4_field_id").val(),style_selected_4=$("#style_selected_4").val()),label_list_attribute_id=$("#img_field_id").val()+"_"+field_1+"_"+field_2+"_"+field_3+"_"+field_4,aspect_list_attribute_id="no_"+style_selected_1+"_"+style_selected_2+"_"+style_selected_3+"_"+style_selected_4):(label_list_attribute_id=$("#img_field_id").val()+"_"+$("#1_field_id").val()+"_0_0_0",aspect_list_attribute_id="no_"+$("#style_selected_1").val()+"___"),ord_attribute_id=$("#ord_attribute_id").val(),ord_dir=$("#ord_dir").val();var _={id:t,view_type:view_type,main_attribute_index:main_attribute_index,label_list_attribute_id:label_list_attribute_id,aspect_list_attribute_id:aspect_list_attribute_id,ord_attribute_id:ord_attribute_id,ord_dir:ord_dir};$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/settings_lists_save.php",data:_,success:function(e){0==e?saved_redirect("?fil=settings_lists",""):saving_error()}})}function loaded_inc(){setTimeout(function(){element_out("blank_back_inc")},300)}function attribute_set_type(e){"2"==e?(document.getElementById("section_parent").style.display="none",document.getElementById("menu_parent").style.display="none"):(document.getElementById("section_parent").style.display="block",document.getElementById("menu_parent").style.display="block")}function settings_groups_create_check(e,t,a,_){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),""==label&&(errorform("label","js_required_field_err",""),error=1),0==error){var i={id:_,label:label};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/settings_groups_create_check.php",data:i,success:function(i){""!=i&&(errorform(i,"js_in_use_data_section_err",""),error=1),0==error&&settings_groups_create(e,t,a,_)}}),!1}}function settings_groups_create(e,t,a,_){saving_process(),label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,""));var i={id:_,label:label};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/settings_groups_create.php",data:i,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=settings_groups",""):saving_error()}}),!1}function attribute_sets_create_check(e,t,a,_){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),attribute_set_id=$("#attribute_set_id").val(),level=$("#level").val(),""==label&&(errorform("label","js_required_field_err",""),error=1),0==error){window.btn_clicked=!0;var i={id:_,label:label,attribute_set_id:attribute_set_id,level:level};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_create_check.php",data:i,success:function(i){""!=i&&(errorform(i,"js_in_use_data_section_err",""),error=1),0==error&&attribute_sets_create(e,t,a,_)}}),!1}}function attribute_sets_create(e,t,a,_){saving_process(),label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),group_id=$("#group_id").val(),related_id=$("#related_id").val(),level=$("#level").val(),attribute_set_id=$("#attribute_set_id").val();var i={id:_,label:label,group_id:group_id,level:level,attribute_set_id:attribute_set_id};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_sets_create.php",data:i,success:function(i){datas=i.split(","),error=datas[0],0==error?"0"!=related_id?""==_?related_attributes_create(e,t,a,datas[1]):saved_redirect("?fil=attribute_sets_edit&dat="+attribute_set_id+"___"+datas[1],""):saved_redirect("?fil=attribute_sets_edit&dat="+datas[1],""):saving_error()}}),!1}function related_attributes_create(e,t,a,_){label=escapeHtml($("#related_label").val().replace(/^\s+|\s+$/g,"")),attribute_type_id=15,attribute_id=0,opt_required=0,related_attribute_set="sec_"+$("#related_id").val(),relation_type=1,attribute_options=opt_required+"___"+related_attribute_set+"___"+relation_type;var i={id:"",label:label,attribute_id:attribute_id,attribute_type_id:attribute_type_id,attribute_set_id:_,attribute_options:attribute_options};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attributes_save.php",data:i,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=attribute_sets_edit&dat="+$("#related_id").val()+"___"+_,""):saving_error()}}),!1}function attributes_sort_list(e,t,a){$("#sortable").sortable({handle:".drag-handle",placeholder:"list-placeholder",axis:"y",sort:function(e,t){t.placeholder.height(t.item.height()),$("#sortable").removeClass("ui-state-default"),set_last_edit()},stop:function(e,t){vardata=$("#sortable").sortable("serialize"),$.ajax({data:vardata,type:"POST",url:"functions/attributes_order_update.php",success:function(){}})}})}function fields_sort_list(e,t,a){$("#sortable").sortable({handle:".drag-handle",placeholder:"list-placeholder",axis:"y",sort:function(e,t){t.placeholder.height(t.item.height()),$("#sortable").removeClass("ui-state-default"),set_last_edit()},stop:function(e,t){vardata=$("#sortable").sortable("serialize"),$.ajax({data:vardata,type:"POST",url:"functions/form_fields_order_update.php",success:function(){}})}})}function change_form_type(e){$(".form_field_option_box").addClass("form_field_option_box_hidden"),""!=e&&($("#form_label_box").removeClass("form_field_option_box_hidden"),$("#form_"+e+"_box").removeClass("form_field_option_box_hidden"))}function add_recipient(e){prev_i=parseInt(e)-1,next_i=parseInt(e)+1,new_recipient='<span class="form_label"><span class="form_label_inner">'+load_text("form_recipient")+" ("+e+')</span><span class="form_required">*</span></span><span class="form_insert"><input type="text" class="form_text form_recipient" id="recipient_'+e+'" value="" onclick="restore_simple_input(this.id)" onchange="set_last_edit()" ><a id="hide_recipient_'+e+'" onclick="hide_recipient('+e+')" class="file_btn tooltip" title="'+load_text("attribute_set_edit_options_type_hide")+'" style="display: block;"><i class="fa fa-times"></i></a><span class="form_error" id="input_error_recipient_'+e+'"><i class="fa fa-exclamation-circle"></i><span id="input_error_message_recipient_'+e+'"></span></span></span><div id="add_field_'+e+'" style="display: block;"><span class="form_label form_position_relative"></span><span class="form_insert form_position_relative"><a onclick="add_recipient('+next_i+')" class="file_btn tooltip" title="'+load_text("attribute_set_edit_options_type_plus")+'"><i class="fa fa-plus"></i></a></span></div><div id="new_recipient_'+next_i+'"></div>',$("#recipient_num").val(e),$("#new_recipient_"+e).html(new_recipient),$("#add_field_"+prev_i).css("display","none"),e>2&&$("#hide_recipient_"+prev_i).css("display","none")}function hide_recipient(e){prev_i=parseInt(e)-1,next_i=parseInt(e)+1,$("#recipient_num").val(prev_i),$("#new_recipient_"+e).html(""),$("#add_field_"+prev_i).css("display","block"),e>2&&$("#hide_recipient_"+prev_i).css("display","block")}function forms_create_check(e,t,a,_){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,type=$("#form_type").val(),label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),""==label&&(errorform("label","js_required_field_err",""),error=1),"search"==type&&(form_search_attribute_set_id=$("#form_search_attribute_set_id").val(),""==form_search_attribute_set_id&&(errorform("form_search_attribute_set_id","form_edit_attribute_set_error",""),error=1)),"send"==type){for(sender=escapeHtml($("#sender").val().replace(/^\s+|\s+$/g,"")),""==sender?(errorform("sender","js_required_field_err",""),error=1):sender.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)||(errorform("sender","js_char_email_err",""),error=1),ri=1;ri<=$("#recipient_num").val();ri++)recipient=escapeHtml($("#recipient_"+ri).val().replace(/^\s+|\s+$/g,"")),""==recipient?(errorform("recipient_"+ri,"js_required_field_err",""),error=1):recipient.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)||(errorform("recipient_"+ri,"js_char_email_err",""),error=1);subject=escapeHtml($("#subject").val().replace(/^\s+|\s+$/g,"")),""==subject&&(errorform("subject","js_required_field_err",""),error=1)}if("save"==type&&(form_save_attribute_set_id=$("#form_save_attribute_set_id").val(),"0"==form_save_attribute_set_id&&(errorform("form_save_attribute_set_id","form_edit_attribute_set_error",""),error=1)),0==error){window.btn_clicked=!0;var i={id:_,label:label,type:type};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/forms_create_check.php",data:i,success:function(i){""!=i&&(errorform(i,"js_in_use_data_section_err",""),error=1),0==error&&forms_create(e,t,a,_)}}),!1}}function forms_create(e,t,a,_){for(saving_process(),label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),attribute_set_id="",group_id=$("#group_id").val(),type=$("#form_type").val(),form_option_page=$("#option_page").val(),form_option_label=$("#option_label").val(),form_options="",sender="",recipient="",subject="",sender=escapeHtml($("#sender").val().replace(/^\s+|\s+$/g,"")),ri=1;ri<=$("#recipient_num").val();ri++)1==ri?recipient+=escapeHtml($("#recipient_"+ri).val().replace(/^\s+|\s+$/g,"")):recipient=recipient+"___"+escapeHtml($("#recipient_"+ri).val().replace(/^\s+|\s+$/g,""));subject=escapeHtml($("#subject").val().replace(/^\s+|\s+$/g,"")),"search"==type&&(attribute_set_id=$("#form_search_attribute_set_id").val()),"save"==type&&(attribute_set_id=$("#form_save_attribute_set_id").val(),form_options=$("#form_save_options").val());var i={id:_,label:label,attribute_set_id:attribute_set_id,group_id:group_id,type:type,sender:sender,recipient:recipient,subject:subject,form_options:form_options,form_option_page:form_option_page,form_option_label:form_option_label};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/forms_create.php",data:i,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=forms_edit&dat="+type+"___"+datas[1],""):saving_error()}}),!1}function show_form_options(){1==$("#notification_option:checked").prop("checked")?document.getElementById("email_option").style.display="block":document.getElementById("email_option").style.display="none"}function forms_options_send_check(e,t,a,_){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,type=$("#form_type").val(),check_type=1,"search"==type&&(check_type=2),"send"==type&&(check_type=2),"save"==type&&1==$("#notification_option:checked").prop("checked")){for(sender=escapeHtml($("#sender").val().replace(/^\s+|\s+$/g,"")),""==sender?(errorform("sender","js_required_field_err",""),error=1):sender.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)||(errorform("sender","js_char_email_err",""),error=1),ri=1;ri<=$("#recipient_num").val();ri++)recipient=escapeHtml($("#recipient_"+ri).val().replace(/^\s+|\s+$/g,"")),""==recipient?(errorform("recipient_"+ri,"js_required_field_err",""),error=1):recipient.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)||(errorform("recipient_"+ri,"js_char_email_err",""),error=1);subject=escapeHtml($("#subject").val().replace(/^\s+|\s+$/g,"")),""==subject&&(errorform("subject","js_required_field_err",""),error=1)}if(0==error)if(1==check_type)forms_options_send(e,t,a,_);else if(2==check_type){window.btn_clicked=!0;var i={id:_,label:label,type:type};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/forms_options:send_check.php",data:i,success:function(i){""!=i&&(errorform(i,"js_in_use_data_section_err",""),error=1),0==error&&forms_options_send(e,t,a,_)}}),!1}}function forms_options_send(e,t,a,_){if(saving_process(),type=$("#form_type").val(),sender="",recipient="",subject="",form_options=0,type,type,"save"==type&&1==$("#notification_option:checked").prop("checked")){for(form_options=1,sender=escapeHtml($("#sender").val().replace(/^\s+|\s+$/g,"")),ri=1;ri<=$("#recipient_num").val();ri++)1==ri?recipient+=escapeHtml($("#recipient_"+ri).val().replace(/^\s+|\s+$/g,"")):recipient=recipient+"___"+escapeHtml($("#recipient_"+ri).val().replace(/^\s+|\s+$/g,""));subject=escapeHtml($("#subject").val().replace(/^\s+|\s+$/g,""))}var i={id:_,type:type,sender:sender,recipient:recipient,subject:subject,form_options:form_options};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/forms_options_send.php",data:i,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=forms_edit&dat="+type+"___"+datas[1],""):saving_error()}}),!1}function forms_options_save(e,t,a,_){saving_process(),type=$("#form_type").val(),form_options=0,type,type,"save"==type&&(form_options=$("#form_save_option_1").val()+"_"+$("#form_save_option_2").val());var i={id:_,type:type,form_options:form_options};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/forms_options_save.php",data:i,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=forms_edit&dat="+type+"___"+datas[1],""):saving_error()}}),!1}function add_value(e){for(prev_i=parseInt(e)-1,next_i=parseInt(e)+1,new_value="",lan=1;lan<=$("#num_lan").val();lan++)lan_id=$("#lan_value_1_"+lan).val(),lan_cod=$("#lan_cod_1_"+lan).val(),new_value=new_value+'<span class="form_label"><span class="form_label_inner">'+load_text("form_edit_field_frontend_value")+" ( "+e+" - "+lan_cod+' )</span><span class="form_required">*</span></span><span class="form_insert"><input type="text" class="form_text form_recipient" id="value_'+e+"_"+lan+'" value="" onclick="restore_simple_input(this.id)" onchange="set_last_edit()" >',1==lan&&(new_value=new_value+'<a id="hide_value_'+e+'" onclick="hide_value('+e+')" class="file_btn tooltip" title="'+load_text("attribute_set_edit_options_type_hide")+'" style="display: block;"><i class="fa fa-times"></i></a>'),new_value=new_value+'<span class="form_error" id="input_error_value_'+e+"_"+lan+'"><i class="fa fa-exclamation-circle"></i><span id="input_error_message_value_'+e+"_"+lan+'"></span></span></span><input type="hidden" id="lan_value_'+e+"_"+lan+'" value="'+lan_id+'" />';new_value=new_value+'<div id="add_field_'+e+'" style="display: block;"><span class="form_label form_position_relative"></span><span class="form_insert form_position_relative"><a onclick="add_value('+next_i+')" class="file_btn tooltip" title="'+load_text("attribute_set_edit_options_type_plus")+'"><i class="fa fa-plus"></i></a></span></div><div id="new_value_'+next_i+'"></div>',$("#value_num").val(e),$("#new_value_"+e).html(new_value),$("#add_field_"+prev_i).css("display","none"),e>2&&$("#hide_value_"+prev_i).css("display","none")}function hide_value(e){prev_i=parseInt(e)-1,next_i=parseInt(e)+1,$("#value_num").val(prev_i),$("#new_value_"+e).html(""),$("#add_field_"+prev_i).css("display","block"),e>2&&$("#hide_value_"+prev_i).css("display","block")}function form_fields_save_check(e,t,a){if(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",error=0,values=t.split("___"),form_type=values[0],form_id=values[1],a=values[2],label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),""==label&&(errorform("label","js_required_field_err",""),error=1),form_field_type_id=$("#form_field_type_id").val(),0==form_field_type_id&&(errorattributeform("form_field_type_id","js_sel_err",""),error=1),"18"!=form_field_type_id)for(i=1;i<=$("#num_lan").val();i++)""==$("#label_"+i).val()&&(errorform("label_"+i,"js_required_field_err",""),error=1);if(form_type,"send"==form_type){if("13"==form_field_type_id&&(number_min_value=$("#number_min_value").val().replace(/^\s+|\s+$/g,""),""!=number_min_value&&isNaN(number_min_value)&&(errorform("number_min_value","js_number_value_err",""),error=1),number_max_value=$("#number_max_value").val().replace(/^\s+|\s+$/g,""),""!=number_max_value&&isNaN(number_max_value)&&(errorform("number_max_value","js_number_value_err",""),error=1)),"15"==form_field_type_id)if(""==$("#form_field_select_type").val())errorform("form_field_select_type","js_required_field_err",""),error=1;else{if("1"==$("#form_field_select_type").val())for(val=1;val<=$("#value_num").val();val++)for(lan=1;lan<=$("#num_lan").val();lan++)value=escapeHtml($("#value_"+val+"_"+lan).val().replace(/^\s+|\s+$/g,"")),""==value&&(errorform("value_"+val+"_"+lan,"js_required_field_err",""),error=1);"2"==$("#form_field_select_type").val()&&""==$("#form_field_select_type_auto").val()&&(errorform("form_field_select_type_auto","js_required_field_err",""),error=1)}"18"==form_field_type_id&&(hidden_value,hidden_value=$("#hidden_value").val().replace(/^\s+|\s+$/g,""),""==hidden_value&&(errorform("hidden_value","js_required_field_err",""),error=1))}if(form_type,0==error){var _={id:a,form_id:form_id,label:label,num_lan:$("#num_lan").val()};if("18"!=form_field_type_id){for(i=1;i<=$("#num_lan").val();i++){var l="label_"+i,s=(s=escapeHtml($("#label_"+i).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");_[l]=s}for(i=1;i<=$("#num_lan").val();i++){l="lan_label_"+i,s=$("#lan_label_"+i).val();_[l]=s}}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/form_fields_save_check.php",data:_,success:function(_){results=_.split("___"),error=0,results.forEach(function(e){""!=e&&(errorform(e,"js_in_use_data_attribute_err",""),error=1)}),0==error&&form_fields_save(e,t,a)}}),!1}}function form_fields_save(e,t,a){saving_process(),values=t.split("___"),form_type=values[0],form_id=values[1],a=values[2],label=escapeHtml($("#label").val().replace(/^\s+|\s+$/g,"")),attribute=$("#attribute_id").val().split("___"),attribute_id=attribute[0],attribute_type_id=attribute[1],form_field_type_id=$("#form_field_type_id").val(),"search"==form_type&&(value_num="",form_field_options="0_______________0______","6"!=form_field_type_id&&"7"!=attribute_type_id&&"8"!=attribute_type_id||(form_field_options="0_______________0______"+$("#form_field_date_operator").val()),"13"==form_field_type_id&&(form_field_options="0_______________0______"+$("#form_field_number_operator").val())),"send"==form_type&&(value_num=$("#value_num").val(),form_field_required=0,1==$("#form_field_required:checked").prop("checked")&&(form_field_required=1),form_field_min_value="",form_field_max_value="","6"==form_field_type_id&&(form_field_min_value=$("#date_min_value").val(),form_field_max_value=$("#date_max_value").val()),"7"==form_field_type_id&&(form_field_min_value="",form_field_max_value="",""!=$("#date_min_value").val()&&(form_field_min_value+=$("#date_min_value").val()),""!=$("#hr_min_value").val()?form_field_min_value=form_field_min_value+" "+$("#hr_min_value").val():form_field_min_value+=" 00",""!=$("#min_min_value").val()?form_field_min_value=form_field_min_value+":"+$("#min_min_value").val():form_field_min_value+=":00",""!=$("#date_max_value").val()&&(form_field_max_value+=$("#date_max_value").val()),""!=$("#hr_max_value").val()?form_field_max_value=form_field_max_value+" "+$("#hr_max_value").val():form_field_max_value+=" 00",""!=$("#min_max_value").val()?form_field_max_value=form_field_max_value+":"+$("#min_max_value").val():form_field_max_value+=":00"),"8"==form_field_type_id&&(form_field_min_value="",form_field_max_value="",""==$("#hr_min_value").val()&&""==$("#min_min_value").val()||(""!=$("#hr_min_value").val()?form_field_min_value+=$("#hr_min_value").val():form_field_min_value+="00",""!=$("#min_min_value").val()?form_field_min_value=form_field_min_value+":"+$("#min_min_value").val():form_field_min_value+=":00"),""==$("#hr_max_value").val()&&""==$("#min_max_value").val()||(""!=$("#hr_max_value").val()?form_field_max_value+=$("#hr_max_value").val():form_field_max_value+="00",""!=$("#min_max_value").val()?form_field_max_value=form_field_max_value+":"+$("#min_max_value").val():form_field_max_value+=":00")),"13"==form_field_type_id&&(form_field_min_value=$("#number_min_value").val(),form_field_max_value=$("#number_max_value").val()),form_field_select_type="",form_field_select_attribute_id="","15"==form_field_type_id&&(form_field_select_type=$("#form_field_select_type").val(),form_field_select_attribute_id=$("#form_field_select_type_auto").val()),form_field_email_replyto=0,1==$("#form_field_email_replyto:checked").prop("checked")&&(form_field_email_replyto=1),form_field_email_copy=0,1==$("#form_field_email_copy:checked").prop("checked")&&(form_field_email_copy=1),form_field_email=form_field_email_replyto+"_"+form_field_email_copy,form_field_def_value="","18"==form_field_type_id&&(form_field_def_value=$("#hidden_value").val()),form_field_options=form_field_required+"___"+form_field_min_value+"___"+form_field_max_value+"___"+form_field_select_type+"___"+form_field_select_attribute_id+"___"+form_field_email+"___"+form_field_def_value+"___"),"save"==form_type&&(value_num="",form_field_required=0,1==$("#form_field_required:checked").prop("checked")&&(form_field_required=1),form_field_min_value="",form_field_max_value="","6"==form_field_type_id&&(form_field_min_value=$("#date_min_value").val(),form_field_max_value=$("#date_max_value").val()),"13"==form_field_type_id&&(form_field_min_value=$("#number_min_value").val(),form_field_max_value=$("#number_max_value").val()),form_field_select_type="",form_field_select_attribute_id="","15"==form_field_type_id&&(form_field_select_type=$("#form_field_select_type").val(),form_field_select_attribute_id=$("#form_field_select_type_auto").val()),form_field_email_replyto=0,1==$("#form_field_email_replyto:checked").prop("checked")&&(form_field_email_replyto=1),form_field_email_copy=0,1==$("#form_field_email_copy:checked").prop("checked")&&(form_field_email_copy=1),form_field_email=form_field_email_replyto+"_"+form_field_email_copy,form_field_def_value="","18"==form_field_type_id&&(form_field_def_value=$("#hidden_value").val()),form_field_options=form_field_required+"___"+form_field_min_value+"___"+form_field_max_value+"___"+form_field_select_type+"___"+form_field_select_attribute_id+"___"+form_field_email+"___"+form_field_def_value+"___");var _={id:a,label:label,form_field_type_id:form_field_type_id,form_id:form_id,attribute_id:attribute_id,value_num:value_num,num_lan:$("#num_lan").val(),form_field_options:form_field_options};for(i=1;i<=$("#num_lan").val();i++){var l="label_"+i,s=(s=escapeHtml($("#label_"+i).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");_[l]=s}for(i=1;i<=$("#num_lan").val();i++){l="lan_label_"+i,s=$("#lan_label_"+i).val();_[l]=s}if("send"==form_type&&"15"==form_field_type_id)for(val=1;val<=$("#value_num").val();val++){for(i=1;i<=$("#num_lan").val();i++){l="value_"+val+"_"+i,s=(s=escapeHtml($("#value_"+val+"_"+i).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");_[l]=s}for(i=1;i<=$("#num_lan").val();i++){l="lan_value_"+val+"_"+i,s=$("#lan_value_"+val+"_"+i).val();_[l]=s}}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/form_fields_save.php",data:_,success:function(e){datas=e.split(","),error=datas[0],0==error?saved_redirect("?fil=forms_edit&dat="+t,""):saving_error()}}),!1}function form_field_type_select(e,t,a){form_field_list="","0___0"==e?form_field_list="2":(values=e.split("___"),attribute_type_id=values[1],"2"==attribute_type_id?form_field_list="2":"3"==attribute_type_id?form_field_list="2":"6"==attribute_type_id?form_field_list="6":"7"==attribute_type_id?form_field_list="7":"8"==attribute_type_id?form_field_list="8":"11"==attribute_type_id?form_field_list="11":"13"==attribute_type_id?form_field_list="13":"12"==attribute_type_id?form_field_list="2":"15"==attribute_type_id?form_field_list="15":"17"==attribute_type_id&&(form_field_list="17")),""==a&&(a=form_field_list),$(".form_field_option_box").addClass("form_field_option_box_hidden"),$("#form_field_type_id_inc").load("inc/form_fields_edit_inc.php?dat="+form_field_list+"___"+t+"___"+a)}function check_form_field_type(e,t){$(".form_field_option_box").addClass("form_field_option_box_hidden"),"2"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden")),"3"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden")),"6"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden"),$("#form_field_date_opt").removeClass("form_field_option_box_hidden"),$("#date_min_value").css("display","block"),$("#hr_min_value").css("display","none"),$("#min_min_value").css("display","none"),$("#date_max_value").css("display","block"),$("#hr_max_value").css("display","none"),$("#min_max_value").css("display","none"),$("#dot_hr_options_min_value").css("display","none"),$("#dot_hr_options_max_value").css("display","none"),$("#form_field_date_opt_label").text(load_text("form_field_date_opt"))),"7"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden"),$("#form_field_date_opt").removeClass("form_field_option_box_hidden"),$("#date_min_value").css("display","block"),$("#hr_min_value").css("display","block"),$("#min_min_value").css("display","block"),$("#date_max_value").css("display","block"),$("#hr_max_value").css("display","block"),$("#min_max_value").css("display","block"),$("#dot_hr_options_min_value").css("display","block"),$("#dot_hr_options_max_value").css("display","block"),$("#box_hr_options_min_value").addClass("box_date_hr_options"),$("#box_min_options_min_value").addClass("box_date_min_options"),$("#box_hr_options_max_value").addClass("box_date_hr_options"),$("#box_min_options_max_value").addClass("box_date_min_options"),$("#box_hr_options_min_value").removeClass("box_time_hr_options"),$("#box_min_options_min_value").removeClass("box_time_min_options"),$("#box_hr_options_max_value").removeClass("box_time_hr_options"),$("#box_min_options_max_value").removeClass("box_time_min_options"),$("#form_field_date_opt_label").text(load_text("form_field_date_time_opt"))),"8"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden"),$("#form_field_date_opt").removeClass("form_field_option_box_hidden"),$("#date_min_value").css("display","none"),$("#hr_min_value").css("display","block"),$("#min_min_value").css("display","block"),$("#date_max_value").css("display","none"),$("#hr_max_value").css("display","block"),$("#min_max_value").css("display","block"),$("#dot_hr_options_min_value").css("display","block"),$("#dot_hr_options_max_value").css("display","block"),$("#box_hr_options_min_value").addClass("box_time_hr_options"),$("#box_min_options_min_value").addClass("box_time_min_options"),$("#box_hr_options_max_value").addClass("box_time_hr_options"),$("#box_min_options_max_value").addClass("box_time_min_options"),$("#box_hr_options_min_value").removeClass("box_date_hr_options"),$("#box_min_options_min_value").removeClass("box_date_min_options"),$("#box_hr_options_max_value").removeClass("box_date_hr_options"),$("#box_min_options_max_value").removeClass("box_date_min_options"),$("#form_field_date_opt_label").text(load_text("form_field_time_opt"))),"11"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden")),"13"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden"),$("#form_field_number_opt").removeClass("form_field_option_box_hidden")),"15"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden"),$("#form_field_select_opt").removeClass("form_field_option_box_hidden")),"17"==e&&($("#form_field_label_opt").removeClass("form_field_option_box_hidden"),$("#form_field_required_opt").removeClass("form_field_option_box_hidden"),$("#form_field_email_opt").removeClass("form_field_option_box_hidden")),"18"==e&&$("#form_field_hidden_opt").removeClass("form_field_option_box_hidden")}function form_select_type(e){$(".form_field_option_select_box").addClass("form_field_option_box_hidden"),$("#form_field_select_type_"+e).removeClass("form_field_option_box_hidden")}function form_field_status(e){var t={id:e};return $.ajax({type:"POST",url:"functions/form_fields_status.php",data:t,success:function(e){datas=e.split("___"),"1"==datas[1]?($("#toggle_"+datas[0]).addClass("fa-toggle-on"),$("#toggle_"+datas[0]).removeClass("fa-toggle-off"),$("#alert_"+datas[0]).css("display","inline-block")):($("#toggle_"+datas[0]).addClass("fa-toggle-off"),$("#toggle_"+datas[0]).removeClass("fa-toggle-on"),$("#alert_"+datas[0]).css("display","none"))}}),!1}function languages_sort_list(e){$("#sortable"+e).sortable({handle:".drag-handle",placeholder:"list-placeholder",axis:"y",sort:function(t,a){a.placeholder.height(a.item.height()),$("#sortable"+e).removeClass("ui-state-default")},stop:function(e,t){var a=$(this).sortable("serialize");$.ajax({data:a,type:"POST",url:"functions/languages_order_update.php",success:function(){}})}})}function item_sort_list(e,t,a,_,i,l,s,n){var r=0;$("#sortable").sortable({handle:".drag-handle",placeholder:i,axis:_,sort:function(e,t){"list-placeholder"==i&&t.placeholder.height(t.item.height())},start:function(e,t){"grid-placeholder"==i&&$(".grid-placeholder").append($('<div class="placeholder-padding"><div class="placeholder-content"></div></div>')),cur_pag=a,a.match("___")&&(pag_array=a.split("___"),cur_pag=pag_array[1]),1!=cur_pag&&element_in("sortable_prev"),cur_pag!=l&&element_in("sortable_next")},stop:function(e,t){if(0==r){var a=$("#sortable").sortable("serialize");a=a+"&first="+s,$.ajax({data:a,type:"POST",url:"functions/item_order_update.php",success:function(){}})}}}),$("#sortable_prev").droppable({hoverClass:"grid-hover",drop:function(e,t){r=1;var a={item_id:t.draggable.attr("id"),first:s};$.ajax({data:a,type:"POST",url:"functions/item_order_prev_update.php",success:function(){}})}}),$("#sortable_next").droppable({hoverClass:"grid-hover",drop:function(e,t){r=1;var a={item_id:t.draggable.attr("id"),first:s,perpage:n};$.ajax({data:a,type:"POST",url:"functions/item_order_next_update.php",success:function(){}})}})}function imagepreview(e){input=document.getElementById("input_image_"+e);var t="box_input_image_"+e,a="box_preview_image_"+e,_="preview_image_"+e;if(input.files&&input.files[0]){var i=new FileReader;i.onload=function(i){if("is_jpg"==image_type)var l=piexif.load(i.target.result);var s=new Image;if("is_jpg"==image_type)s.onload=function(){var e=l["0th"][piexif.ImageIFD.Orientation],t=document.createElement("canvas");t.width=s.width,t.height=s.height;var a=t.getContext("2d"),i=0,o=0;a.save(),2==e?(i=-t.width,a.scale(-1,1)):3==e?(i=-t.width,o=-t.height,a.scale(-1,-1)):4==e?(o=-t.height,a.scale(1,-1)):5==e?(t.width=s.height,t.height=s.width,a.translate(t.width,t.height/t.width),a.rotate(Math.PI/2),o=-t.width,a.scale(1,-1)):6==e?(t.width=s.height,t.height=s.width,a.translate(t.width,t.height/t.width),a.rotate(Math.PI/2)):7==e?(t.width=s.height,t.height=s.width,a.translate(t.width,t.height/t.width),a.rotate(Math.PI/2),i=-t.height,a.scale(-1,1)):8==e&&(t.width=s.height,t.height=s.width,a.translate(t.width,t.height/t.width),a.rotate(Math.PI/2),i=-t.height,o=-t.width,a.scale(-1,-1)),a.drawImage(s,i,o),a.restore();var d=t.toDataURL();$("#"+_).attr("src",d),r=t.width,n=t.height;if(200/150>r/n){var p=200*n/r,m=-(p-150)/2;document.getElementById("in_box_"+_).style.marginTop=m+"px",document.getElementById("in_box_"+_).style.marginLeft="0",document.getElementById("in_box_"+_).style.width="200px",document.getElementById("in_box_"+_).style.height=p+"px",document.getElementById(_).width="200",document.getElementById(_).height=p}else{var u=150*r/n,c=-(u-200)/2;document.getElementById("in_box_"+_).style.marginTop="0",document.getElementById("in_box_"+_).style.marginLeft=c+"px",document.getElementById("in_box_"+_).style.width=u+"px",document.getElementById("in_box_"+_).style.height="150px",document.getElementById(_).width=u,document.getElementById(_).height="150"}},s.src=i.target.result,document.getElementById(t).style.display="none",document.getElementById(a).style.display="block";else{$("#"+_).attr("src",i.target.result),s.src=i.target.result,document.getElementById(t).style.display="none",document.getElementById(a).style.display="block";var n=s.height,r=s.width;if(200/150>r/n){var o=200*n/r,d=-(o-150)/2;document.getElementById("in_box_"+_).style.marginTop=d+"px",document.getElementById("in_box_"+_).style.marginLeft="0",document.getElementById("in_box_"+_).style.width="200px",document.getElementById("in_box_"+_).style.height=o+"px",document.getElementById(_).width="200",document.getElementById(_).height=o}else{var p=150*r/n,m=-(p-200)/2;document.getElementById("in_box_"+_).style.marginTop="0",document.getElementById("in_box_"+_).style.marginLeft=m+"px",document.getElementById("in_box_"+_).style.width=p+"px",document.getElementById("in_box_"+_).style.height="150px",document.getElementById(_).width=p,document.getElementById(_).height="150"}}s.complete||(s.onload=function(){imagepreview(e)})},i.readAsDataURL(input.files[0])}}function imagepreview_logo(e){var t=document.getElementById("input_image_"+e).value;if(t){var a=t.indexOf("\\")>=0?t.lastIndexOf("\\"):t.lastIndexOf("/");if(0===(_=t.substring(a)).indexOf("\\")||0===_.indexOf("/"))var _=_.substring(1)}estensione=_.substr(_.lastIndexOf(".")+1);if(in_array_value=$.inArray(estensione,["Png","png","PNG","jpg","Jpg","JPG","jpeg","Jpeg","JPEG"]),-1!=in_array_value){input=document.getElementById("input_image_"+e);var i="box_input_image_"+e,l="box_preview_image_"+e,s="preview_image_"+e;if(input.files&&input.files[0]){var n=new FileReader;n.onload=function(e){$("#"+s).attr("src",e.target.result),document.getElementById(i).style.display="none",document.getElementById(l).style.display="block";var t=new Image;(t.src=e.target.result,t.complete)?caricaimmagine_logo(t.height,t.width,s):t.onload=function(){caricaimmagine_logo(t.height,t.width,s)}},n.readAsDataURL(input.files[0])}}else errorform("box_input_image_"+e,"js_only_image_err",""),document.getElementById("input_image_"+e).value=""}function caricaimmagine_logo(e,t,a){e<=50?(height=e,width=t):(height=50,width=50*t/e),document.getElementById("in_box_"+a).style.height=height+"px",document.getElementById(a).height=height,document.getElementById("in_box_"+a).style.width=width+"px"}function editpreview(e){input=document.getElementById("input_image_"+e);var t="preview_image_"+e;if(input.files&&input.files[0]){var a=new FileReader;a.onload=function(e){$("#"+t).attr("src",e.target.result)},a.readAsDataURL(input.files[0])}}function removepreview(e){document.getElementById("preview_image_full_"+e).value="",document.getElementById("input_image_"+e).value="",document.getElementById("delete_image_"+e).value="1",$("#preview_image_"+e).attr("src","css/images/blank.png"),document.getElementById("box_input_image_"+e).style.display="block",document.getElementById("box_preview_image_"+e).style.display="none"}function zoom_in_img(e,t){element_in("black_back"),element_in("light_box"),""!=$("#preview_image_full_"+e).val()?zoom_image=$("#preview_image_full_"+e).val():zoom_image=$("#preview_image_"+e).attr("src");$("#preview_image_"+e);document.getElementById("black_back").style.opacity=".80",document.getElementById("light_box").innerHTML='<div class="light_box_container"><div class="light_box_content_large" onclick="zoom_out_img()"><img src="'+zoom_image+'"/><a id="lightbox_close_button" class="fixed_button fa fa-times" onclick="zoom_out_img()" title="'+load_text("close")+'"></a></div></div>'}function zoom_out_img(e){document.getElementById("light_box").innerHTML="",element_out("black_back"),element_out("light_box")}function removefile(e){var t="input_file_"+e,a="file_btn_"+e,_="btn_input_file_"+e;document.getElementById(t).value="",document.getElementById(a).href="",document.getElementById("delete_file_"+e).value=1,document.getElementById(t).style.display="block",document.getElementById(_).style.display="none"}function show_remove_set_date(e){""!=$("#date_"+e).val()&&(document.getElementById("remove_date_"+e).style.display="block"),""!=$("#hr_"+e).val()&&(document.getElementById("remove_date_"+e).style.display="block"),""!=$("#min_"+e).val()&&(document.getElementById("remove_date_"+e).style.display="block")}function remove_set_date(e){document.getElementById("remove_date_"+e).style.display="none","6"!=$("#form_field_type_id").val()&&"7"!=$("#form_field_type_id").val()||(document.getElementById("date_"+e).value=""),"7"!=$("#form_field_type_id").val()&&"8"!=$("#form_field_type_id").val()||(document.getElementById("hr_"+e).value="",document.getElementById("min_"+e).value="")}function now_set_date(e){document.getElementById("remove_date_"+e).style.display="block","6"!=$("#form_field_type_id").val()&&"7"!=$("#form_field_type_id").val()||(document.getElementById("date_"+e).value="Now"),"7"!=$("#form_field_type_id").val()&&"8"!=$("#form_field_type_id").val()||(document.getElementById("hr_"+e).value="Now",document.getElementById("min_"+e).value="Now")}function remove_set_datetime(e){document.getElementById("string_value_"+e).value="",document.getElementById("hr_"+e).value="",document.getElementById("min_"+e).value="",document.getElementById("remove_date_time_"+e).style.display="none"}function show_remove_date(e){""!=$("#string_value_"+e).val()&&(document.getElementById("remove_date_time_"+e).style.display="block")}function show_remove_hour(e){""!=$("#hr_"+e).val()&&(document.getElementById("remove_date_time_"+e).style.display="block")}function show_remove_minutes(e){""!=$("#min_"+e).val()&&(document.getElementById("remove_date_time_"+e).style.display="block")}function removedate(e){document.getElementById("string_value_"+e).value="",document.getElementById("remove_date_time_"+e).style.display="none"}function removedatetime(e){document.getElementById("string_value_"+e).value="",document.getElementById("hr_"+e).value="",document.getElementById("min_"+e).value="",document.getElementById("remove_date_time_"+e).style.display="none"}function removetime(e){document.getElementById("hr_"+e).value="",document.getElementById("min_"+e).value="",document.getElementById("remove_date_time_"+e).style.display="none"}function show_time(e,t){if($(".single_option").removeClass("selected"),""==$("#"+t+"_"+e).val())var a=0;else a=$("#"+t+"_"+e).val();$("#single_option_"+t+"_"+e+"_"+a).addClass("selected"),element_in("box_"+t+"_options_"+e),$(document).mouseup(function(a){var _=$("#box_"+t+"_options_"+e);a.target.id==_.attr("id")||_.has(a.target).length||element_out("box_"+t+"_options_"+e)})}function set_time(e,t,a){var _=$("#"+t+"_"+a).val();$("#single_option_"+t+"_"+a+"_"+_).removeClass("selected"),$("#"+t+"_"+a).val(document.getElementById("single_option_"+t+"_"+a+"_"+e).innerHTML),$("#single_option_"+t+"_"+a+"_"+e).addClass("selected")}function hide_report_upload(){$("#report_uploads").animate({opacity:"0"},150),setTimeout(function(){$("#report_uploads").animate({height:"0"},150)},150)}function insert_shared_image(e,t){var a='<img src="uploads/images/'+t+'">';tinymce.get("string_value_"+e).execCommand("mceInsertContent",!1,a),element_out("light_box"),$("#light_box").html("")}function close_shared_lightbox(){element_out("light_box"),$("#light_box").html("")}function items_multi_files_check(e,t,a,_){for(element_in("blank_back"),attribute_list=$("#attribute_list").val(),attributeListArr=attribute_list.split(","),attribute_id=attributeListArr[0],items_list_lenght=$("input[id=input_file_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_file_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(items_list_lenght=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),items_list_lenght-=1,preview_box_index=items_list_lenght;preview_box_index>=0;preview_box_index--)$("#sortable").prepend($('<li id="oggetto-preview-'+preview_box_index+'"><span class="tableRow"><span id="file_preview_waiting_'+preview_box_index+'" class="file_preview_uploading"><span class="action fa fa-square-o disabled_button"></span><span class="action fa fa-sort disabled_button"></span><span class="action fa fa-eye tooltip disabled_button"></span><span class="action fa fa-pencil tooltip disabled_button"></span><div class="list_container"><span class="list_data" style=" width: calc(100% - 15px); "><span class="list_style_mr">'+load_text("items_list_upload_waiting")+'</span></span></div></span></span><input type="hidden" id="file_input_'+preview_box_index+'" value="1"></li>')),$("#file_preview_waiting_"+preview_box_index).animate({opacity:"1"},300);items_single_file_check(e,t,a,_,0)}function items_single_file_check(e,t,a,_,i){if(attribute_list=$("#attribute_list").val(),attributeListArr=attribute_list.split(","),attribute_id=attributeListArr[0],items_list_lenght=$("input[id=input_file_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_file_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(items_list_lenght=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),i<items_list_lenght){var l,s;if(next_item=i+1,nome_originale_immagine=$("input[id=input_file_"+attribute_id+"]").get(0).files[i].name,!window.FileReader)return void alert(load_text("js_api_err"));l=document.getElementById("input_file_"+attribute_id),$("input[id=input_file_"+attribute_id+"]").get(0).files[i]&&(l.files?(s=$("input[id=input_file_"+attribute_id+"]").get(0).files[i],max_file_upload_size_b=1048576*$("#max_file_upload_size").val(),max_file_upload_size_mb=$("#max_file_upload_size").val(),s.size>max_file_upload_size_b?(items_multi_file_error(i,nome_originale_immagine,load_text("js_max_filesize_err")+max_file_upload_size_mb+"MB"),items_single_file_check(e,t,a,_,next_item)):items_multi_file_save(e,t,a,_,i)):alert(load_text("js_browser_err")))}else items_multi_file_exit(attribute_id)}function items_multi_file_error(e,t,a){$("#oggetto-preview-"+e+" .tableRow").html($('<span id="file_preview_alert_'+e+'" class="file_preview_alert"><span class="action fa fa-square-o disabled_button"></span><span class="action fa fa-sort disabled_button"></span><span class="action fa fa-eye tooltip disabled_button"></span><span class="action fa fa-pencil tooltip disabled_button"></span><div class="list_container"><span class="list_data" style=" width: calc(100% - 15px); "><span class="list_style_mr"><i class="fa fa-exclamation-triangle"></i></span></span></div><span>')),$("#oggetto-preview-"+e+" .tableRow").addClass("error_list_element"),$("#report_uploads").append('<div class="report_upload"><i class="fa fa-exclamation-triangle"></i>'+t+" "+a+"</div>"),$("#file_input_"+e).val("0"),$("#file_preview_alert_"+e).animate({opacity:"1"},300)}function items_multi_file_save(e,t,a,_,i){attribute_list=$("#attribute_list").val(),attribute_list.indexOf(",")>-1?(attributeListArr=attribute_list.split(","),attribute_id=attributeListArr[0],attribute_id_parent=attributeListArr[1]):(attribute_id=attributeListArr,attribute_id_parent="0"),attribute_type_id=$("#attribute_type_"+attribute_id).val(),attribute_options=$("#attribute_options_"+attribute_id).val(),next_item=i+1,$("#file_preview_waiting_"+i).animate({opacity:"0"},150),setTimeout(function(){$("#oggetto-preview-"+i+" .tableRow").html($('<span id="file_preview_uploading_'+i+'" class="file_preview_uploading"><span class="action fa fa-square-o disabled_button"></span><span class="action fa fa-sort disabled_button"></span><span class="action fa fa-eye tooltip disabled_button"></span><span class="action fa fa-pencil tooltip disabled_button"></span><div class="list_container"><span class="list_data" style=" width: calc(100% - 15px); "><span class="list_style_mr"><img src="css/images/loading-install.gif" height="30"></span></span></div></')),$("#file_preview_uploading_"+i).animate({opacity:"1"},300)},150),attribute_set_id=$("#attribute_set_id").val(),item_id=$("#item_id").val(),status=$("#status").val(),last_index=$("input[id=input_file_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_file_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(last_index=parseInt($("#num_max").val())-parseInt($("#list_num").val())));var l={id:"",attribute_set_id:attribute_set_id,item_id:item_id,label_option:"",num_lan:1,item_index:i,last_index:last_index,status:status};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/items_save.php",data:l,success:function(l){var s=l.split(",");_=s[0],item_id=s[1];var n={item_index:i,item_id:_,attribute_id:attribute_id,string_value:"input_file_"+attribute_id,delete_file:$("#delete_file_"+attribute_id).val()};return $.ajaxSetup({cache:!1}),$.ajaxFileUpload({url:"functions/attribute_type_9_save.php",secureuri:!1,type:"POST",fileElementId:"input_file_"+attribute_id,dataType:"json",data:n,success:function(l){if(error=l.error.split("___"),1==error[0]&&saving_error(),"ko"==error[1])saving_error(),document.getElementById("input-alert_"+attribute_id).style.display="block";else if(items_list_lenght=$("input[id=input_file_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_file_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(items_list_lenght=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),i<items_list_lenght?items_single_file_check(e,t,a,"",next_item):items_multi_file_exit(attribute_id),$("#file_preview_uploading_"+i).animate({opacity:"0"},150),"0"==attribute_id_parent)setTimeout(function(){$("#oggetto-preview-"+i+" .tableRow").html($('<span id="file_preview_uploaded_'+i+'" class="file_preview_uploading"><span class="action tooltip" title="'+load_text("items_list_select")+'"><input id="del_new_'+i+'" value="'+_+'" onchange="show_delete_button()" type="checkbox"><label id="del_new_label_'+i+'" for="del_new_'+i+'"></label></span><span class="action fa fa-sort drag-handle tooltip ui-sortable-handle" title="'+load_text("common_reorder")+"\"></span><a onclick=\"items_status('items_list', '"+t+"', '"+a+"', '0', '"+_+'\')" class="action fa fa-eye tooltip" title="'+load_text("items_list_dont_publish")+'"></a><a href="?fil=items_edit&amp;dat='+t+"___"+_+"&amp;pag="+a+'" class="action fa fa-pencil tooltip" title="'+load_text("items_list_modify")+'"></a><div class="list_container"><span class="list_data" style=" width: calc(100% - 15px); "><span class="list_style_mr">'+error[2]+"</span></span></div></span>")),$("#file_preview_uploaded_"+i).animate({opacity:"1"},300),$("#oggetto-preview-"+i).attr("id","oggetto-"+_)},150);else{setTimeout(function(){$("#oggetto-preview-"+i+" .tableRow").html($('<span id="file_preview_uploaded_'+i+'" class="file_preview_uploading"><span class="action tooltip" title="'+load_text("items_list_select")+'"><input id="del_new_'+i+'" value="'+_+'" onchange="show_delete_button()" type="checkbox"><label id="del_new_label_'+i+'" for="del_new_'+i+'"></label></span><span class="action fa fa-sort drag-handle tooltip ui-sortable-handle" title="'+load_text("common_reorder")+"\"></span><a onclick=\"items_status('items_list_sub', '"+t+"', '"+a+"', '0', '"+_+'\')" class="action fa fa-eye tooltip" title="'+load_text("items_list_dont_publish")+'"></a><a href="?fil=items_edit_sub&amp;dat='+t+"___"+_+"&amp;pag="+a+'" class="action fa fa-pencil tooltip" title="'+load_text("items_list_modify")+'"></a><div class="list_container"><span class="list_data" style=" width: calc(100% - 15px); "><span class="list_style_mr">'+error[2]+"</span></span></div></span>")),$("#file_preview_uploaded_"+i).animate({opacity:"1"},300),$("#oggetto-preview-"+i).attr("id","oggetto-"+_)},150),array_options=$("#attribute_options_"+attributeListArr[1]).val().split("___");var s={item_id:_,attribute_id:attributeListArr[1],string_value:$("#string_value_"+attributeListArr[1]).val(),string_value_old:$("#string_value_old_"+attributeListArr[1]).val(),attribute_set_id:$("#attribute_set_id").val(),type:1};$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_15_save.php",data:s,success:function(e){}})}}}),!1}}),$("#last_edit").val(0),!1}function items_multi_file_exit(e){setTimeout(function(){for(show_report=0,count_report=0,new_item=$("input[id=input_file_"+e+"]").get(0).files.length,last_item=$("input[id=input_file_"+e+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_file_"+e+"]").get(0).files.length),$("#num_max").val()<tot_images&&(new_item=parseInt($("#num_max").val())-parseInt($("#list_num").val()),last_item=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),last_item-=1,report_index=0;report_index<$("input[id=input_file_"+e+"]").get(0).files.length;report_index++)0==$("#file_input_"+report_index).val()&&(count_report++,new_item--,show_report=1,$("#oggetto-preview-"+report_index).animate({opacity:"0"},150),$("#oggetto-preview-"+report_index).animate({width:"0"},150),$("#oggetto-preview-"+report_index).animate({margin:"0"},150));for(num=$("#list_num").val(),new_num=parseInt(num)+parseInt(new_item),tot_extra_num=new_num,start_num=parseInt($("#list_num_display").text()),tot_num=parseInt(start_num)+parseInt(new_item),$("#list_num").val(new_num),$("#list_num_display").text(tot_num),list_num=num;list_num>=1;list_num--)$("#delete_"+list_num).attr("id","delete_"+new_num),$("#delete_label_"+list_num).attr("for","delete_"+new_num),new_num--;for(extra_first=parseInt($("#items_per_page").val())+1,extra_num=extra_first;extra_num<=tot_extra_num;extra_num++)extra_id=$("#delete_"+extra_num).val(),$("#oggetto-"+extra_id).remove();for(del_index=last_item;del_index>=0;del_index--)1==$("#file_input_"+del_index).val()&&($("#del_new_"+del_index).attr("id","delete_"+new_num),$("#del_new_label_"+del_index).attr("for","delete_"+new_num),new_num--);tot_page=tot_num/parseInt($("#items_per_page").val()),tot_pages=Math.ceil(tot_page),$("#tot_pages").text(tot_pages),start_num<=50&&tot_num>=51&&(""==$("#item_id").val()?$("#page_buttons").html('<a href="?fil=items_list&amp;dat='+$("#attribute_set_id").val()+'&amp;pag=2" class="btn_paginazione fa fa-chevron-right" title="'+load_text("common_next_page")+'"></a><span class="btn_paginazione_fake fa fa-chevron-left"></span><span class="label_paginazione">Pagina 1 di <span id="tot_pages">'+tot_pages+"</span></span>"):$("#page_buttons").html('<a href="?fil=items_list&amp;dat='+$("#attribute_set_id").val()+"___"+$("#attribute_set_parent_id").val()+"___"+$("#item_id").val()+'&amp;pag=1___2" class="btn_paginazione fa fa-chevron-right" title="'+load_text("common_next_page")+'"></a><span class="btn_paginazione_fake fa fa-chevron-left"></span><span class="label_paginazione">Pagina 1 di <span id="tot_pages">'+tot_pages+"</span></span>")),total_set_time=150*count_report,setTimeout(function(){1==show_report&&($(".error_list_element").remove(),$("#report_uploads").css("height","auto"),$("#report_uploads").css("opacity","1"))},total_set_time),$("#select_all").css("display","block"),$("#deselect_all").css("display","none"),$("#select_all_disabled").css("display","none"),$("#list_num").val()==$("#num_max").val()&&($("#plus_button").css("display","none"),$("#plus_fake_button").css("display","block"));var t=$("#sortable").sortable("serialize");t+="&first=0",$.ajax({data:t,type:"POST",url:"functions/item_order_update.php",success:function(){element_out("blank_back")}})},1e3),element_out("blank_back")}function items_multi_images_check(e,t,a,_){for(element_in("blank_back"),attribute_list=$("#attribute_list").val(),attributeListArr=attribute_list.split(","),attribute_id=attributeListArr[0],items_list_lenght=$("input[id=input_image_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_image_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(items_list_lenght=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),items_list_lenght-=1,preview_box_index=items_list_lenght;preview_box_index>=0;preview_box_index--)$("#sortable").prepend($('<div id="oggetto-preview-'+preview_box_index+'" class="grid_element"><div class="grid_container"><div id="image_preview_loading_'+preview_box_index+'" class="image_preview_loading"><div class="preview_container"><p>'+load_text("items_list_upload_waiting")+'</div></div></div></div><input type="hidden" id="image_input_'+preview_box_index+'" value="1">'));items_single_image_check(e,t,a,_,0)}function items_single_image_check(e,t,a,_,i){if(attribute_list=$("#attribute_list").val(),attributeListArr=attribute_list.split(","),attribute_id=attributeListArr[0],items_list_lenght=$("input[id=input_image_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_image_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(items_list_lenght=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),i<items_list_lenght){attribute_type_id=$("#attribute_type_"+attribute_id).val(),attribute_options=$("#attribute_options_"+attribute_id).val();var l=$("input[id=input_image_"+attribute_id+"]").get(0).files[i].name;if(l){var s=l.indexOf("\\")>=0?l.lastIndexOf("\\"):l.lastIndexOf("/");if(0===(n=l.substring(s)).indexOf("\\")||0===n.indexOf("/"))var n=n.substring(1)}estensione=n.substr(n.lastIndexOf(".")+1);if(in_array_value=$.inArray(estensione,["Png","png","PNG","jpg","Jpg","JPG","jpeg","Jpeg","JPEG"]),next_item=i+1,nome_originale_immagine=$("input[id=input_image_"+attribute_id+"]").get(0).files[i].name,-1!=in_array_value){var r;if(array_options=attribute_options.split("___"),!window.FileReader)return void alert(load_text("js_api_err"));if($("input[id=input_image_"+attribute_id+"]").get(0).files[i])if($("input[id=input_image_"+attribute_id+"]").get(0).files)if(r=$("input[id=input_image_"+attribute_id+"]").get(0).files[i],max_image_upload_size_b=1048576*$("#max_image_upload_size").val(),max_image_upload_size_mb=$("#max_image_upload_size").val(),r.size>max_image_upload_size_b)items_multi_image_error(i,nome_originale_immagine,load_text("js_max_filesize_err")+max_image_upload_size_mb+"MB"),items_single_image_check(e,t,a,_,next_item);else{image_upload_pixel_limit=$("#max_image_upload_px").val();var o=new FileReader;o.onload=function(l){var s=new Image;if(s.src=l.target.result,s.complete){if(s.height>image_upload_pixel_limit||s.width>image_upload_pixel_limit)items_multi_image_error(i,nome_originale_immagine,load_text("js_max_imagesize_err")+image_upload_pixel_limit+"x"+image_upload_pixel_limit+" px"),items_single_image_check(e,t,a,_,next_item);else if(1==array_options[7]){if(1==array_options[1])if(""!=array_options[2]&&""!=array_options[3]){if(s.height>=array_options[3]||s.width>=array_options[2])return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+load_text("js_min_image_width")+" "+array_options[2]+"px "+load_text("js_min_image_or")+" "+load_text("js_min_image_height")+" "+array_options[3]+"px"),items_single_image_check(e,t,a,_,next_item)}else{if(""==array_options[3]){if(!(s.width<array_options[2]))return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+load_text("js_min_image_width")+" "+array_options[2]+"px "+load_text("js_min_imagesize_err")+load_text("js_min_image_width")+" "+array_options[2]+"px"),items_single_image_check(e,t,a,_,next_item)}if(""==array_options[2]){if(!(s.height<array_options[3]))return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+load_text("js_min_image_height")+" "+array_options[2]+"px"),items_single_image_check(e,t,a,_,next_item)}}else if(2==array_options[1]){if(!(s.height<array_options[3]||s.width<array_options[2]))return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+array_options[2]+"x"+array_options[3]+" px"),items_single_image_check(e,t,a,_,next_item)}}else if(0==array_options[7])return items_multi_image_save(e,t,a,_,i),!1}else s.onload=function(){if(s.height>image_upload_pixel_limit||s.width>image_upload_pixel_limit)items_multi_image_error(i,nome_originale_immagine,+load_text("js_max_imagesize_err")+image_upload_pixel_limit+"x"+image_upload_pixel_limit+" px"),items_single_image_check(e,t,a,_,next_item);else if(1==array_options[7]){if(1==array_options[1])if(""!=array_options[2]&&""!=array_options[3]){if(s.height>=array_options[3]||s.width>=array_options[2])return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+load_text("js_min_image_width")+" "+array_options[2]+"px "+load_text("js_min_image_or")+" "+load_text("js_min_image_height")+" "+array_options[3]+"px"),items_single_image_check(e,t,a,_,next_item)}else{if(""==array_options[3]){if(!(s.width<array_options[2]))return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+load_text("js_min_image_width")+" "+array_options[2]+"px"),items_single_image_check(e,t,a,_,next_item)}if(""==array_options[2]){if(!(s.height<array_options[3]))return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+load_text("js_min_image_height")+" "+array_options[2]+"px"),items_single_image_check(e,t,a,_,next_item)}}else if(2==array_options[1]){if(!(s.height<array_options[3]||s.width<array_options[2]))return items_multi_image_save(e,t,a,_,i),!1;items_multi_image_error(i,nome_originale_immagine,load_text("js_min_imagesize_err")+array_options[2]+"x"+array_options[3]+" px"),items_single_image_check(e,t,a,_,next_item)}}else if(0==array_options[7])return items_multi_image_save(e,t,a,_,i),!1}},o.readAsDataURL($("input[id=input_image_"+attribute_id+"]").get(0).files[i])}else alert(load_text("js_browser_err"));return!1}items_multi_image_error(i,nome_originale_immagine,load_text("js_only_image_err")),items_single_image_check(e,t,a,_,next_item)}else items_multi_image_exit(attribute_id)}function items_multi_image_error(e,t,a){$("#oggetto-preview-"+e+" .grid_container").append($('<div id="image_preview_alert_'+e+'" class="image_preview_alert"><div class="preview_container"><i class="fa fa-exclamation-triangle"></i></div></div>')),$("#report_uploads").append('<div class="report_upload"><i class="fa fa-exclamation-triangle"></i>\''+t+"' "+a+"</div>"),$("#image_input_"+e).val("0"),$("#image_preview_alert_"+e).animate({opacity:"1"},300),setTimeout(function(){$("#image_preview_alert_"+e+" i").animate({opacity:"1"},150)},150)}function items_multi_image_save(e,t,a,_,i){attribute_list=$("#attribute_list").val(),attribute_list.indexOf(",")>-1?(attributeListArr=attribute_list.split(","),attribute_id=attributeListArr[0],attribute_id_parent=attributeListArr[1]):(attribute_id=attributeListArr,attribute_id_parent="0"),attribute_type_id=$("#attribute_type_"+attribute_id).val(),attribute_options=$("#attribute_options_"+attribute_id).val(),next_item=i+1,$("#oggetto-preview-"+i+" .grid_container").append($('<div id="image_preview_uploading_'+i+'" class="image_preview_uploading"><div class="preview_container"><img src="css/images/loading-install.gif"></div></div>')),$("#image_preview_uploading_"+i).animate({opacity:"1"},300),setTimeout(function(){$("#image_preview_uploading_"+i+" img").animate({opacity:"1"},150),$("#image_preview_uploading_"+i+" p").animate({opacity:"1"},150),setTimeout(function(){$("#image_preview_loading_"+i).animate({opacity:"0"},150)},150)},300),attribute_set_id=$("#attribute_set_id").val(),item_id=$("#item_id").val(),status=$("#status").val(),last_index=$("input[id=input_image_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_image_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(last_index=parseInt($("#num_max").val())-parseInt($("#list_num").val())));var l={id:"",attribute_set_id:attribute_set_id,item_id:item_id,label_option:"",num_lan:1,item_index:i,last_index:last_index,status:status};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/items_save.php",data:l,success:function(l){var s=l.split(",");_=s[0],item_id=s[1],array_options=attribute_options.split("___"),fullsize_type=array_options[1],image_width=array_options[2],image_height=array_options[3],thumbnail_type=array_options[4],thumb_width=array_options[5],thumb_height=array_options[6],image_upload_quality=$("#image_upload_quality").val();var n={item_index:i,item_id:_,attribute_id:attribute_id,string_value:"input_image_"+attribute_id,delete_image:$("#delete_image_"+attribute_id).val(),fullsize_type:fullsize_type,image_width:image_width,image_height:image_height,thumbnail_type:thumbnail_type,thumb_width:thumb_width,thumb_height:thumb_height,image_upload_quality:image_upload_quality};return $.ajaxSetup({cache:!1}),$.ajaxFileUpload({url:"functions/attribute_type_5_save.php",secureuri:!1,type:"POST",fileElementId:"input_image_"+attribute_id,dataType:"json",data:n,success:function(l){if(error=l.error.split("___"),1==error[0]&&saving_error(),"ko"==error[1])saving_error(),document.getElementById("input-alert_"+attribute_id).style.display="block";else{if("shared_1"==$("#multi_upload_type").val()?$("#oggetto-preview-"+i+" .grid_container").append($('<div class="grid_preview" style="background-image: url(uploads/images/r_'+error[2]+');"></div><div class="grid_actions"><a href="?fil=items_edit&amp;dat='+attribute_set_id+"___"+_+'&amp;pag=1" class="action fa fa-pencil tooltip" title="'+load_text("items_list_modify")+'"></a><span class="action tooltip" title="'+load_text("items_list_select")+'"><input id="del_new_'+i+'" value="'+_+'" onchange="show_delete_button()" type="checkbox"><label id="del_new_label_'+i+'" for="del_new_'+i+'"></label></span></div>')):"included"==$("#multi_upload_type").val()?$("#oggetto-preview-"+i+" .grid_container").append($('<div class="grid_preview" style="background-image: url(uploads/images/r_'+error[2]+');"></div><div class="grid_actions"><a onclick="insert_shared_image(\''+$("#wisiwyg_id").val()+"','"+error[2]+'\')" class="action fa fa-check-circle tooltip" title="'+load_text("items_list_modify")+'"></a></div>')):"0"==attribute_id_parent?$("#oggetto-preview-"+i+" .grid_container").append($('<div class="grid_preview drag-handle ui-sortable-handle" style="background-image: url(uploads/images/r_'+error[2]+');"><div id="drag-'+_+'" class="drag_hover tooltip" title="'+load_text("common_reorder")+'"><i class="fa fa-arrows"></i></div></div><div class="grid_actions"><a href="?fil=items_edit&amp;dat='+attribute_set_id+"___"+_+'&amp;pag=1" class="action fa fa-pencil tooltip" title="'+load_text("items_list_modify")+"\"></a><a onclick=\"items_status('items_list', '"+t+"', '"+a+"', '0', '"+_+'\')" class="action fa fa-eye tooltip" title="'+load_text("items_list_dont_publish")+'"></a><span class="action tooltip" title="'+load_text("items_list_select")+'"><input id="del_new_'+i+'" value="'+_+'" onchange="show_delete_button()" type="checkbox"><label id="del_new_label_'+i+'" for="del_new_'+i+'"></label></span></div>')):$("#oggetto-preview-"+i+" .grid_container").append($('<div class="grid_preview drag-handle ui-sortable-handle" style="background-image: url(uploads/images/r_'+error[2]+');"><div id="drag-'+_+'" class="drag_hover tooltip" title="'+load_text("common_reorder")+'"><i class="fa fa-arrows"></i></div></div><div class="grid_actions"><a href="?fil=items_edit_sub&amp;dat='+attribute_set_id+"___"+_+'&amp;pag=1" class="action fa fa-pencil tooltip" title="'+load_text("items_list_modify")+"\"></a><a onclick=\"items_status('items_list_sub', '"+t+"', '"+a+"', '0', '"+_+'\')" class="action fa fa-eye tooltip" title="'+load_text("items_list_dont_publish")+'"></a><span class="action tooltip" title="'+load_text("items_list_select")+'"><input id="del_new_'+i+'" value="'+_+'" onchange="show_delete_button()" type="checkbox"><label id="del_new_label_'+i+'" for="del_new_'+i+'"></label></span></div>')),$("#image_preview_uploading_"+i).animate({opacity:"0"},150),setTimeout(function(){$("#image_preview_loading_"+i).remove(),$("#image_preview_uploading_"+i).remove(),$("#oggetto-preview-"+i).attr("id","oggetto-"+_)},150),"0"!=attribute_id_parent){array_options=$("#attribute_options_"+attributeListArr[1]).val().split("___");var s={item_id:_,attribute_id:attributeListArr[1],string_value:$("#string_value_"+attributeListArr[1]).val(),string_value_old:$("#string_value_old_"+attributeListArr[1]).val(),attribute_set_id:$("#attribute_set_id").val(),type:1};$.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_15_save.php",data:s,success:function(e){}})}items_list_lenght=$("input[id=input_image_"+attribute_id+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_image_"+attribute_id+"]").get(0).files.length),$("#num_max").val()<tot_images&&(items_list_lenght=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),i<items_list_lenght?items_single_image_check(e,t,a,"",next_item):items_multi_image_exit(attribute_id)}}}),!1}}),$("#last_edit").val(0),!1}function items_multi_image_exit(e){setTimeout(function(){for(show_report=0,count_report=0,new_item=$("input[id=input_image_"+e+"]").get(0).files.length,last_item=$("input[id=input_image_"+e+"]").get(0).files.length,0!=$("#num_max").val()&&(tot_images=parseInt($("#list_num").val())+parseInt($("input[id=input_image_"+e+"]").get(0).files.length),$("#num_max").val()<tot_images&&(new_item=parseInt($("#num_max").val())-parseInt($("#list_num").val()),last_item=parseInt($("#num_max").val())-parseInt($("#list_num").val()))),last_item-=1,report_index=0;report_index<new_item;report_index++)0==$("#image_input_"+report_index).val()&&(count_report++,new_item--,show_report=1,$("#oggetto-preview-"+report_index).addClass("error_grid_element"),$("#oggetto-preview-"+report_index).animate({opacity:"0"},150),$("#oggetto-preview-"+report_index).animate({width:"0"},150),$("#oggetto-preview-"+report_index).animate({margin:"0"},150));for(num=$("#list_num").val(),new_num=parseInt(num)+parseInt(new_item),$("#list_num").val(new_num),$("#list_num_display").text(new_num),list_num=num;list_num>=1;list_num--)$("#delete_"+list_num).attr("id","delete_"+new_num),$("#delete_label_"+list_num).attr("for","delete_"+new_num),new_num--;for(report_index=last_item;report_index>=0;report_index--)1==$("#image_input_"+report_index).val()&&($("#del_new_"+report_index).attr("id","delete_"+new_num),$("#del_new_label_"+report_index).attr("for","delete_"+new_num),new_num--);total_set_time=150*count_report,setTimeout(function(){if($(".error_grid_element").remove(),1==show_report){var e=$("#report_uploads"),t=e.height(),a=e.css("height","auto").height();e.height(t).animate({height:a},150),setTimeout(function(){$("#report_uploads").animate({opacity:"1"},150)},150)}},total_set_time),$("#select_all").css("display","block"),$("#deselect_all").css("display","none"),$("#select_all_disabled").css("display","none"),$("#list_num").val()==$("#num_max").val()&&($("#plus_button").css("display","none"),$("#plus_fake_button").css("display","block"));var t=$("#sortable").sortable("serialize");t+="&first=0",$.ajax({data:t,type:"POST",url:"functions/item_order_update.php",success:function(){element_out("blank_back")}})},1e3)}function text_counter(e,t){attribute_type_id=$("#attribute_type_"+e).val(),values=$("#attribute_options_"+e).val().split("___"),2==attribute_type_id?char_limit=values[2]:3==attribute_type_id&&(char_limit=values[1]),$("#string_value_"+e+"_"+t).val().length>char_limit&&($("#string_value_"+e+"_"+t).val($("#string_value_"+e+"_"+t).val().slice(0,char_limit)),errorform("string_value_"+e+"_"+t,"js_max_value_err","")),$("#counter_string_value_"+e+"_"+t).text($("#string_value_"+e+"_"+t).val().length)}function duplicate_language(e,t,a){for(tot_language=$("#num_lan").val(),language=2;language<=tot_language;language++)$("#string_value_"+e+"_"+language).val($("#string_value_"+e+"_1").val())}function check_field_start(e){attribute_type_id=$("#attribute_type_"+e).val(),attribute_options=$("#attribute_options_"+e).val(),2==attribute_type_id&&0!=attribute_options&&(array_options=attribute_options.split("___"),0!=array_options[1]&&(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block")),attribute_type_id,5==attribute_type_id&&0!=attribute_options&&(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block"),attribute_type_id,attribute_type_id,attribute_type_id,9==attribute_type_id&&0!=attribute_options&&(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block"),attribute_type_id,attribute_type_id,13==attribute_type_id&&(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block"),attribute_type_id,17==attribute_type_id&&(document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block")}function check_field_options(e,t,a){if(attribute_type_id=$("#attribute_type_"+e).val(),attribute_options=$("#attribute_options_"+e).val(),2==attribute_type_id&&0!=attribute_options&&(array_options=attribute_options.split("___"),0!=array_options[1])){var _={string_value:escapeHtml($("#string_value_"+e+"_"+t).val().replace(/^\s+|\s+$/g,"")),attribute_set_id:$("#attribute_set_id").val(),attribute_id:e,lan:$("#lan_"+e+"_"+t).val(),item_id:a};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_value_check.php",data:_,success:function(a){1==a?(errorform("string_value_"+e+"_"+t,"js_unique_value_err",""),main_error=1):(document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")}}),!1}if(attribute_type_id,5==attribute_type_id&&0!=attribute_options){var i=document.getElementById("input_image_"+e).value;if(i){var l=i.indexOf("\\")>=0?i.lastIndexOf("\\"):i.lastIndexOf("/");if(0===(s=i.substring(l)).indexOf("\\")||0===s.indexOf("/"))var s=s.substring(1)}estensione=s.substr(s.lastIndexOf(".")+1);in_array_jpg=$.inArray(estensione,["jpg","Jpg","JPG","jpeg","Jpeg","JPEG"]),in_array_png=$.inArray(estensione,["Png","png","PNG"]),-1!=in_array_jpg&&(image_type="is_jpg"),-1!=in_array_png&&(image_type="is_png");if(in_array_value=$.inArray(estensione,["Png","png","PNG","jpg","Jpg","JPG","jpeg","Jpeg","JPEG"]),-1!=in_array_value){if(array_options=attribute_options.split("___"),!window.FileReader)return void alert(load_text("js_api_err"));if((r=document.getElementById("input_image_"+e)).files[0])if(r.files)if(o=r.files[0],max_image_upload_size_b=1048576*$("#max_image_upload_size").val(),max_image_upload_size_mb=$("#max_image_upload_size").val(),o.size>max_image_upload_size_b)errorimageform(e,"js_max_filesize_err",max_image_upload_size_mb+"MB"),main_error=1;else{image_upload_pixel_limit=$("#max_image_upload_px").val();var n=new FileReader;n.onload=function(t){var a=new Image;a.src=t.target.result,a.complete?a.height>image_upload_pixel_limit||a.width>image_upload_pixel_limit?(errorimageform(e,"js_max_imagesize_err",image_upload_pixel_limit+"x"+image_upload_pixel_limit+" px"),main_error=1):1==array_options[7]?1==array_options[1]?""!=array_options[2]&&""!=array_options[3]?a.height<array_options[3]||a.width<array_options[2]?(errorimageform(e,"js_min_imagesize_err",load_text("js_min_image_width")+" "+array_options[2]+"px "+load_text("js_min_image_or")+" "+load_text("js_min_image_height")+" "+array_options[3]+"px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"):(""==array_options[3]&&(a.width<array_options[2]?(errorimageform(e,"js_min_imagesize_err",load_text("js_min_image_width")+" "+array_options[2]+"px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")),""==array_options[2]&&(a.height<array_options[3]?(errorimageform(e,"js_min_imagesize_err",load_text("js_min_image_height")+" "+array_options[2]+"px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"))):2==array_options[1]&&(a.height<array_options[3]||a.width<array_options[2]?(errorimageform(e,"js_min_imagesize_err",array_options[2]+"x"+array_options[3]+" px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"):a.onload=function(){a.height>image_upload_pixel_limit||a.width>image_upload_pixel_limit?(errorimageform(e,"js_max_imagesize_err",image_upload_pixel_limit+"x"+image_upload_pixel_limit+" px"),main_error=1):1==array_options[7]?1==array_options[1]?""!=array_options[2]&&""!=array_options[3]?a.height<array_options[3]||a.width<array_options[2]?(errorimageform(e,"js_min_imagesize_err",load_text("js_min_image_width")+" "+array_options[2]+"px "+load_text("js_min_image_or")+" "+load_text("js_min_image_height")+" "+array_options[3]+"px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"):(""==array_options[3]&&(a.width<array_options[2]?(errorimageform(e,"js_min_imagesize_err",load_text("js_min_image_width")+" "+array_options[2]+"px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")),""==array_options[2]&&(a.height<array_options[3]?(errorimageform(e,"js_min_imagesize_err",load_text("js_min_image_height")+" "+array_options[2]+"px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"))):2==array_options[1]&&(a.height<array_options[3]||a.width<array_options[2]?(errorimageform(e,"js_min_imagesize_err",array_options[2]+"x"+array_options[3]+" px"),main_error=1):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")):(imagepreview(e),document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")}},n.readAsDataURL(r.files[0])}else alert(load_text("js_browser_err"))}else errorimageform(e,"js_only_image_err",""),main_error=1}if(attribute_type_id,attribute_type_id,attribute_type_id,9==attribute_type_id&&0!=attribute_options){var r,o;if(attribute_value=$("#input_file_"+e).val().replace(/^\s+|\s+$/g,""),!window.FileReader)return void alert(load_text("js_api_err"));(r=document.getElementById("input_file_"+e)).files[0]&&(r.files?(o=r.files[0],max_file_upload_size_b=1048576*$("#max_file_upload_size").val(),max_file_upload_size_mb=$("#max_file_upload_size").val(),o.size>max_file_upload_size_b?(errorform("input_file_"+e,"js_max_filesize_err",max_file_upload_size_mb+"MB"),main_error=1,removefile(e)):(document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")):alert(load_text("js_browser_err")))}if(attribute_type_id,attribute_type_id,13==attribute_type_id)if(attribute_value=$("#string_value_"+e).val().replace(/^\s+|\s+$/g,""),""!=attribute_value){0==/^[0-9.,]+$/.test(attribute_value)?(errorform("string_value_"+e,"js_number_value_err",""),main_error=1):(document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")}else document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none";attribute_type_id,17==attribute_type_id&&(attribute_value=$("#string_value_"+e).val().replace(/^\s+|\s+$/g,""),""!=attribute_value?attribute_value.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z0-9])/i)?(document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"):(errorform("string_value_"+e,"js_char_email_err",""),main_error=1):(document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none")),set_last_edit()}function check_custom_label_start(){document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block"}function check_custom_label(e,t){main_error=0;if(custom_label=$("#custom_label_"+e).val().replace(/^\s+|\s+$/g,""),""!=custom_label&&(/^[a-zA-Z0-9_.-]+$/.test(custom_label)||(errorform("custom_label_"+e,"js_char_data_err",""),main_error=1),isNaN(custom_label)||(errorform("custom_label_"+e,"js_char_data_letters_err",""),main_error=1)),0==main_error){var a={item_id:$("#id").val(),attribute_set_id:$("#attribute_set_id").val(),custom_label:custom_label,lan_custom_label:t};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/items_save_url_check.php",data:a,success:function(t){document.getElementById("custom_label_"+e).value=t,document.getElementById("savebutton").style.display="block",document.getElementById("fakebutton").style.display="none"}}),!1}}function items_save_check(e,t,a,_){document.getElementById("savebutton").style.display="none",document.getElementById("fakebutton").style.display="block",attribute_list=$("#attribute_list").val(),full_attribute_list=attribute_list,items_save_check_inner(e,t,a,full_attribute_list,0,_,0)}function items_save_check_inner(e,t,a,_,s,n,r){var o=_.split(",");if(attribute_list_length=o.length,s==attribute_list_length){if(label_option=$("#label_option").val().split("_"),""==n){if(1==label_option[0]&&0==label_option[1])for(l=1;l<=$("#num_lan").val();l++)""==$("#custom_label_"+l).val().replace(/^\s+|\s+$/g,"")&&(errorform("custom_label_"+l,"js_required_field_err",""),r=1)}else if(1==label_option[0])for(l=1;l<=$("#num_lan").val();l++)""==$("#custom_label_"+l).val().replace(/^\s+|\s+$/g,"")&&(errorform("custom_label_"+l,"js_required_field_err",""),r=1);0==r&&items_save(e,t,a,n)}else{if(item_id=n,attribute_id=o[s],attribute_type_id=$("#attribute_type_"+attribute_id).val(),attribute_options=$("#attribute_options_"+attribute_id).val(),2==attribute_type_id){if(array_options=attribute_options.split("___"),0!=array_options[0]){for(i=1;i<=$("#num_lan").val();i++)array_options=attribute_options.split("___"),0!=array_options[0]&&(attribute_value=escapeHtml($("#string_value_"+attribute_id+"_"+i).val().replace(/^\s+|\s+$/g,"")),""==attribute_value&&(errorform("string_value_"+attribute_id+"_"+i,"js_required_field_err",""),r=1));return items_save_check_inner(e,t,a,_,s+1,n,r),!1}return items_save_check_inner(e,t,a,_,s+1,n,r),!1}if(3==attribute_type_id){if(0!=attribute_options){for(i=1;i<=$("#num_lan").val();i++)array_options=attribute_options.split("___"),0!=array_options[0]&&(attribute_value=escapeHtml($("#string_value_"+attribute_id+"_"+i).val().replace(/^\s+|\s+$/g,"")),""==attribute_value&&(errorform("string_value_"+attribute_id+"_"+i,"js_required_field_err",""),r=1));return items_save_check_inner(e,t,a,_,s+1,n,r),!1}return items_save_check_inner(e,t,a,_,s+1,n,r),!1}if(5==attribute_type_id)return array_options=attribute_options.split("___"),0!=array_options[0]?(string=document.getElementById("preview_image_"+attribute_id).src,last_charchters=string.split("/images/"),"css/images/"+last_charchters[1]=="css/images/blank.png"&&(errorform("box_input_image_"+attribute_id,"js_required_field_err",""),r=1),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1);if(6==attribute_type_id)return array_options=attribute_options.split("___"),0!=array_options[0]?(attribute_value=$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,""),""==attribute_value&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1);if(7==attribute_type_id)return array_options=attribute_options.split("___"),0!=array_options[0]?(attribute_value=$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,""),""==attribute_value&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1),attribute_value=$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,""),""==attribute_value&&(errorform("hr_"+attribute_id,"js_required_field_err",""),r=1),attribute_value=$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,""),""==attribute_value&&(errorform("min_"+attribute_id,"js_required_field_err",""),r=1),""!=$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(""==$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("hr_"+attribute_id,"js_required_field_err",""),r=1),""==$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("min_"+attribute_id,"js_required_field_err",""),r=1)),""!=$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(""==$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("hr_"+attribute_id,"js_required_field_err",""),r=1),""==$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1)),""!=$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(""==$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("min_"+attribute_id,"js_required_field_err",""),r=1),""==$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1)),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1);if(8==attribute_type_id)return 0!=attribute_options?(attribute_value=$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,""),""==attribute_value&&(errorform("hr_"+attribute_id,"js_required_field_err",""),r=1),attribute_value=$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,""),""==attribute_value&&(errorform("min_"+attribute_id,"js_required_field_err",""),r=1),""!=$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&""==$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("hr_"+attribute_id,"js_required_field_err",""),r=1),""!=$("#hr_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&""==$("#min_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("min_"+attribute_id,"js_required_field_err",""),r=1),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1);if(9==attribute_type_id)return 0!=attribute_options?(""==document.getElementById("file_btn_"+attribute_id).getAttribute("href")&&""==$("#input_file_"+attribute_id).val().replace(/^\s+|\s+$/g,"")&&(errorform("input_file_"+attribute_id,"js_required_field_err",""),r=1),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1);if(11==attribute_type_id)return items_save_check_inner(e,t,a,_,s+1,n,r),!1;if(12==attribute_type_id)return items_save_check_inner(e,t,a,_,s+1,n,r),!1;if(13==attribute_type_id)return attribute_value=$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,""),0!=attribute_options?(""==attribute_value&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1);if(15==attribute_type_id){if(0!=attribute_options){if(array_options=attribute_options.split("___"),1==array_options[0]&&(1==array_options[2]&&0==$("#string_value_"+attribute_id).val()&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1),2==array_options[2])){for(has_value=0,i=1;i<=$("#options_num_"+attribute_id).val();i++)1==$("#checkbox_"+attribute_id+"_"+i+":checked").prop("checked")&&(has_value=1);0==has_value&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1)}return items_save_check_inner(e,t,a,_,s+1,n,r),!1}return items_save_check_inner(e,t,a,_,s+1,n,r),!1}if(17==attribute_type_id)return attribute_value=$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,""),0!=attribute_options?(""==attribute_value&&(errorform("string_value_"+attribute_id,"js_required_field_err",""),r=1),items_save_check_inner(e,t,a,_,s+1,n,r),!1):(items_save_check_inner(e,t,a,_,s+1,n,r),!1)}}function edit_custom_label(e){$("#custom_label_"+e).prop("disabled",!1)}function items_save(e,t,a,_){attribute_set_id=$("#attribute_set_id").val(),item_id=$("#item_id").val(),status=$("#status").val(),label_option=$("#label_option").val(),0!=label_option&&(label_option=$("#label_option").val().split("_")),saving_process();var i={id:_,attribute_set_id:attribute_set_id,item_id:item_id,label_option:$("#label_option").val(),num_lan:$("#num_lan").val(),status:status};if(""==_){if("1"==label_option[0]&&"0"==label_option[1]){for(l=1;l<=$("#num_lan").val();l++){var s="custom_label_"+l,n=$("#custom_label_"+l).val().replace(/^\s+|\s+$/g,"");i[s]=n}for(l=1;l<=$("#num_lan").val();l++){s="lan_custom_label_"+l,n=$("#lan_custom_label_"+l).val();i[s]=n}}if("1"==label_option[0]&&"0"!=label_option[1]){for(l=1;l<=$("#num_lan").val();l++){s="custom_label_att_"+l,n=$("#string_value_"+label_option[1]+"_"+l).val().replace(/^\s+|\s+$/g,"");i[s]=n}for(l=1;l<=$("#num_lan").val();l++){s="lan_custom_label_att_"+l,n=$("#lan_"+label_option[1]+"_"+l).val();i[s]=n}}}else if("1"==label_option[0]){for(l=1;l<=$("#num_lan").val();l++){s="custom_label_"+l,n=$("#custom_label_"+l).val().replace(/^\s+|\s+$/g,"");i[s]=n}for(l=1;l<=$("#num_lan").val();l++){s="lan_custom_label_"+l,n=$("#lan_custom_label_"+l).val();i[s]=n}}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/items_save.php",data:i,success:function(i){var l=i.split(",");_=l[0],item_id=l[1],attribute_list=$("#attribute_list").val(),full_attribute_list=attribute_list,inner_save_item(e,t,a,full_attribute_list,0,_,item_id)}}),$("#last_edit").val(0),!1}function inner_save_item(e,t,a,_,i,l,s){var n=_.split(",");if(i==n.length)attribute_set_id=$("#attribute_set_id").val(),saved_redirect("items_list"==e||"items_list_sub"==e?"?fil="+e+"&dat="+t+"&pag="+a:"?fil="+e+"&dat="+t+"___"+l+"&pag="+a,"");else{if(attribute_id=n[i],attribute_type_id=$("#attribute_type_"+attribute_id).val(),2==attribute_type_id){var r={item_id:l,attribute_id:attribute_id,num_lan:$("#num_lan").val()};for(p=1;p<=$("#num_lan").val();p++){var o="string_value_"+p,d=(d=escapeHtml($("#string_value_"+attribute_id+"_"+p).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");r[o]=d}for(p=1;p<=$("#num_lan").val();p++){o="lan_"+p,d=$("#lan_"+attribute_id+"_"+p).val();r[o]=d}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_2_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(3==attribute_type_id){r={item_id:l,attribute_id:attribute_id,num_lan:$("#num_lan").val()};for(p=1;p<=$("#num_lan").val();p++){o="string_value_"+p,d=(d=escapeHtml($("#string_value_"+attribute_id+"_"+p).val().replace(/^\s+|\s+$/g,""))).replace(/"/g,"&quot;");r[o]=d}for(p=1;p<=$("#num_lan").val();p++){o="lan_"+p,d=$("#lan_"+attribute_id+"_"+p).val();r[o]=d}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_3_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(5==attribute_type_id){attribute_options=$("#attribute_options_"+attribute_id).val(),array_options=attribute_options.split("___"),fullsize_type=array_options[1],image_width=array_options[2],image_height=array_options[3],thumbnail_type=array_options[4],thumb_width=array_options[5],thumb_height=array_options[6],image_upload_quality=$("#image_upload_quality").val();r={item_id:l,attribute_id:attribute_id,string_value:"input_image_"+attribute_id,delete_image:$("#delete_image_"+attribute_id).val(),fullsize_type:fullsize_type,image_width:image_width,image_height:image_height,thumbnail_type:thumbnail_type,thumb_width:thumb_width,thumb_height:thumb_height,image_upload_quality:image_upload_quality};return $.ajaxSetup({cache:!1}),$.ajaxFileUpload({url:"functions/attribute_type_5_save.php",secureuri:!1,type:"POST",fileElementId:"input_image_"+attribute_id,dataType:"json",data:r,success:function(n,r){error=n.error.split("___"),1==error[0]&&saving_error(),"ko"==error[1]?(saving_error(),document.getElementById("input-alert_"+attribute_id).style.display="block"):inner_save_item(e,t,a,_,i+1,l,s)},error:function(e,t,a){alert(a),saving_error()}}),!1}if(6==attribute_type_id){r={item_id:l,attribute_id:attribute_id,string_value:$("#string_value_"+attribute_id).val()};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_6_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(7==attribute_type_id){dt="",hr="",mn="",dt=$("#string_value_"+attribute_id).val(),hr=$("#hr_"+attribute_id).val(),mn=$("#min_"+attribute_id).val();r={item_id:l,attribute_id:attribute_id,dt:dt,hr:hr,mn:mn};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_7_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(8==attribute_type_id){hr="",mn="",hr=$("#hr_"+attribute_id).val(),mn=$("#min_"+attribute_id).val();r={item_id:l,attribute_id:attribute_id,hr:hr,mn:mn};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_8_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(9==attribute_type_id){r={item_id:l,attribute_id:attribute_id,delete_file:$("#delete_file_"+attribute_id).val(),string_value:"input_file_"+attribute_id};return $.ajaxSetup({cache:!1}),$.ajaxFileUpload({url:"functions/attribute_type_9_save.php",secureuri:!1,type:"POST",fileElementId:"input_file_"+attribute_id,dataType:"json",data:r,success:function(n,r){error=n.error.split("___"),1==error[0]&&saving_error(),"ko"==error[1]?(saving_error(),document.getElementById("input-alert_"+attribute_id).style.display="block"):inner_save_item(e,t,a,_,i+1,l,s)},error:function(e,t,a){alert(a),saving_error()}}),!1}if(11==attribute_type_id){1==$("#string_value_"+attribute_id+":checked").prop("checked")?string_value=1:string_value=0;r={item_id:l,attribute_id:attribute_id,string_value:string_value};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_11_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(12==attribute_type_id){r={item_id:l,attribute_id:attribute_id,num_lan:$("#num_lan").val()};for(p=1;p<=$("#num_lan").val();p++){o="string_value_"+p,d=tinymce.get("string_value_"+attribute_id+"_"+p).getContent();r[o]=d}for(p=1;p<=$("#num_lan").val();p++){o="lan_"+p,d=$("#lan_"+attribute_id+"_"+p).val();r[o]=d}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_12_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(13==attribute_type_id){r={item_id:l,attribute_id:attribute_id,string_value:$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,"")};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_13_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(15==attribute_type_id){if(array_options=$("#attribute_options_"+attribute_id).val().split("___"),1==array_options[2])r={item_id:l,attribute_id:attribute_id,string_value:$("#string_value_"+attribute_id).val(),string_value_old:$("#string_value_old_"+attribute_id).val(),attribute_set_id:$("#attribute_set_id").val(),type:1};if(2==array_options[2]){var p;r={item_id:l,attribute_id:attribute_id,option_num:$("#options_num_"+attribute_id).val(),type:2};for(p=1;p<=$("#options_num_"+attribute_id).val();p++){1==$("#checkbox_"+attribute_id+"_"+p+":checked").prop("checked")?string_value=$("#string_value_"+attribute_id+"_"+p).val():string_value="";o="string_value_"+p,d=string_value;r[o]=d}}return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_15_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}if(17==attribute_type_id){r={item_id:l,attribute_id:attribute_id,string_value:$("#string_value_"+attribute_id).val().replace(/^\s+|\s+$/g,"")};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/attribute_type_17_save.php",data:r,success:function(n){error=n,1==error&&saving_error(),inner_save_item(e,t,a,_,i+1,l,s)}}),!1}}}function items_status(e,t,a,_,i){var l={id:i,status:_};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/items_status.php",data:l,success:function(_){load_page(e,t,a)}}),!1}function refresh_child_values(e,t,a,_,i){var l={related_attribute_set:a,section_self_id:t};return $.ajaxSetup({cache:!1}),$.ajax({type:"POST",url:"functions/related_attribute_set.php",data:l,success:function(l){child_attribute=l,$("#form_insert_"+l).load("inc/related_item_select.php?item_id="+e+"&child_attribute="+child_attribute+"&parent_item="+_+"&section_self_id="+t+"&related_attribute_set="+a+"&refresh_all="+i)}}),!1}function show_ord_dir(e){document.getElementById("ord_dir_div").style.display=""!=e?"block":"none"}function add_attribute_to_code(e,t,a,_,i){"1"==_?(attribute_list=$("#attribute_list_"+e).val(),$("#attribute_list_"+e).val(attribute_list+"___"+a)):"2"==_&&(multi_attribute_list=$("#multi_attribute_list_"+e+"_"+i).val(),$("#multi_attribute_list_"+e+"_"+i).val(multi_attribute_list+"___"+a)),document.getElementById("btn_"+e+"_"+t).style.backgroundColor="#DDDDDD",document.getElementById("btn_add_"+e+"_"+t).style.display="none",document.getElementById("btn_crop_"+e+"_"+t).style.display="block"}function crop_attribute_from_code(e,t,a,_,i){"1"==_?(attribute_list=$("#attribute_list_"+e).val(),$("#attribute_list_"+e).val(attribute_list.replace("___"+a,""))):"2"==_&&(multi_attribute_list=$("#multi_attribute_list_"+e+"_"+i).val(),$("#multi_attribute_list_"+e+"_"+i).val(multi_attribute_list.replace("___"+a,""))),document.getElementById("btn_"+e+"_"+t).style.backgroundColor="#f4f4f4",document.getElementById("btn_add_"+e+"_"+t).style.display="block",document.getElementById("btn_crop_"+e+"_"+t).style.display="none"}function add_count_to_code(e,t){$("#count_"+e).val("1"),document.getElementById("btn_"+e+"_"+t).style.backgroundColor="#DDDDDD",document.getElementById("btn_add_"+e+"_"+t).style.display="none",document.getElementById("btn_crop_"+e+"_"+t).style.display="block"}function crop_count_to_code(e,t){$("#count_"+e).val("0"),document.getElementById("btn_"+e+"_"+t).style.backgroundColor="#f4f4f4",document.getElementById("btn_add_"+e+"_"+t).style.display="block",document.getElementById("btn_crop_"+e+"_"+t).style.display="none"}function all_or_number(e,t){"all"==t?(document.getElementById(e).style.backgroundColor="#f5f5f5",document.getElementById(e).style.color="#cccccc",document.getElementById(e+"_all").checked=!0,document.getElementById(e).value=""):(document.getElementById(e).style.backgroundColor="#ffffff",document.getElementById(e).style.color="#292f35",document.getElementById(e+"_number").checked=!0,document.getElementById(e).focus())}function check_page_and_total(e){1!=$("#total_number_"+e+"_all:checked").prop("checked")&&(document.getElementById("page_number_"+e)&&parseInt($("#page_number_"+e).val())>=parseInt($("#total_number_"+e).val())&&(document.getElementById("page_number_"+e).style.backgroundColor="#f5f5f5",document.getElementById("page_number_"+e).style.color="#cccccc",document.getElementById("page_number_"+e+"_all").checked=!0,$("#page_number_"+e).val("")),total_number=$("#total_number_"+e).val(),""==total_number&&(document.getElementById("total_number_"+e).style.backgroundColor="#f5f5f5",document.getElementById("total_number_"+e).style.color="#cccccc",document.getElementById("total_number_"+e+"_all").checked=!0,$("#total_number_"+e).val("")),isNaN(total_number)&&(document.getElementById("total_number_"+e).style.backgroundColor="#f5f5f5",document.getElementById("total_number_"+e).style.color="#cccccc",document.getElementById("total_number_"+e+"_all").checked=!0,$("#total_number_"+e).val(""))),document.getElementById("page_number_"+e)&&1!=$("#page_number_"+e+"_all:checked").prop("checked")&&(page_number=$("#page_number_"+e).val(),""==page_number&&(document.getElementById("page_number_"+e).style.backgroundColor="#f5f5f5",document.getElementById("page_number_"+e).style.color="#cccccc",document.getElementById("page_number_"+e+"_all").checked=!0,$("#page_number_"+e).val("")),isNaN(page_number)&&(document.getElementById("page_number_"+e).style.backgroundColor="#f5f5f5",document.getElementById("page_number_"+e).style.color="#cccccc",document.getElementById("page_number_"+e+"_all").checked=!0,$("#page_number_"+e).val("")))}function open_accordion(e){"none"==document.getElementById("ul_"+e).style.display?(document.getElementById("show_accordion_"+e).innerHTML=load_text("frontend_section_hide")+' <i class="fa fa-caret-down"></i>',document.getElementById("ul_"+e).style.display="block"):(document.getElementById("show_accordion_"+e).innerHTML=load_text("frontend_section_show")+' <i class="fa fa-caret-right"></i>',document.getElementById("ul_"+e).style.display="none")}function change_type(e,t){if(""==e)document.getElementById("specific_item_"+t).style.display="none",document.getElementById("box_order_"+t).style.display="none",document.getElementById("box_number_"+t).style.display="none",1==t&&(document.getElementById("box_pages_"+t).style.display="none"),document.getElementById("box_filters_"+t).style.display="none",document.getElementById("box_search_fields_"+t).style.display="none",document.getElementById("box_attributes_"+t).style.display="none",document.getElementById("box_alternative_"+t).style.display="none",document.getElementById("code_options_inner_2")&&(document.getElementById("code_options_inner_2").style.display="none");else{for(1==e?(document.getElementById("specific_item_"+t).style.display="none",document.getElementById("box_order_"+t).style.display="none",document.getElementById("box_number_"+t).style.display="none",1==t&&(document.getElementById("box_pages_"+t).style.display="none"),document.getElementById("box_filters_"+t).style.display="none",document.getElementById("box_search_fields_"+t).style.display="none",document.getElementById("box_attributes_"+t).style.display="block",document.getElementById("box_alternative_"+t).style.display="none"):2==e?(document.getElementById("specific_item_"+t).style.display="block",document.getElementById("box_order_"+t).style.display="none",document.getElementById("box_number_"+t).style.display="none",1==t&&(document.getElementById("box_pages_"+t).style.display="none"),document.getElementById("box_filters_"+t).style.display="none",document.getElementById("box_search_fields_"+t).style.display="none",document.getElementById("box_attributes_"+t).style.display="block",document.getElementById("box_alternative_"+t).style.display="none"):3==e?(document.getElementById("specific_item_"+t).style.display="none",document.getElementById("box_order_"+t).style.display="block",document.getElementById("box_number_"+t).style.display="block",1==t&&(document.getElementById("box_pages_"+t).style.display="block"),document.getElementById("box_filters_"+t).style.display="block",document.getElementById("box_search_fields_"+t).style.display="none",document.getElementById("box_attributes_"+t).style.display="block",document.getElementById("box_alternative_"+t).style.display="block"):5==e&&(document.getElementById("specific_item_"+t).style.display="none",document.getElementById("box_order_"+t).style.display="none",document.getElementById("box_number_"+t).style.display="none",1==t&&(document.getElementById("box_pages_"+t).style.display="none"),document.getElementById("box_filters_"+t).style.display="none",document.getElementById("box_search_fields_"+t).style.display="none",document.getElementById("box_attributes_"+t).style.display="block",document.getElementById("box_alternative_"+t).style.display="none"),item_id=2==e?$("#single_item_selected_1").val():"",ind=parseInt(t)+1;ind<=$("#tot_attribute_set").val();ind++)attribute_set=$("#attribute_set_"+ind).val(),main_attribute_set=$("#main_attribute_set").val(),total_attribute_set=$("#tot_attribute_set").val(),$("#code_options_"+ind).load("inc/frontend_sections_inc.php?i="+ind+"&attribute_set="+attribute_set+"&item_id="+item_id+"&total_attribute_set="+total_attribute_set+"&main="+main_attribute_set),document.getElementById("code_options_"+ind).style.display="block";document.getElementById("code_options_inner_2")&&4!=e?document.getElementById("code_options_inner_2").style.display="block":document.getElementById("code_options_inner_2").style.display="none"}}function show_single_item_list(e){"none"==document.getElementById("single_item_list_"+e).style.display?document.getElementById("single_item_list_"+e).style.display="block":document.getElementById("single_item_list_"+e).style.display="none"}function select_single_item(e,t,a){for(document.getElementById("single_item_title_"+e).innerHTML=document.getElementById("single_item_"+e+"_"+t).innerHTML+'<i class="fa fa-caret-down" aria-hidden="true"></i>',document.getElementById("single_item_list_"+e).style.display="none",document.getElementById("single_item_selected_"+e).value=t,document.getElementById("single_item_selected_label_"+e).value=a,ind=1;ind<=$("#single_item_tot_"+e).val();ind++)$(".single_item_"+e).removeClass("active");if($("#single_item_"+e+"_"+t).addClass("active"),1==e)for(item_id=$("#single_item_selected_1").val(),ind=2;ind<=$("#tot_attribute_set").val();ind++)attribute_set=$("#attribute_set_"+ind).val(),main_attribute_set=$("#main_attribute_set").val(),total_attribute_set=$("#tot_attribute_set").val(),$("#code_options_"+ind).load("inc/frontend_sections_inc.php?i="+ind+"&attribute_set="+attribute_set+"&item_id="+item_id+"&total_attribute_set="+total_attribute_set+"&main="+main_attribute_set)}function show_order_select(e,t,a){"1"==e?(document.getElementById("order_direction_"+a).style.display="block",document.getElementById("order_select_"+a).style.display="block"):(document.getElementById("order_direction_"+a).style.display="none",document.getElementById("order_select_"+a).style.display="none")}function order_select(e,t,a){"sections"==e&&$("#accordion_"+t+"_selected").text("Valore selezionato: "+$("#order_type option:selected").text()+" "+a),"attributes"==e&&$("#accordion_"+t+"_selected").text("Valore selezionato: "+a)}function show_filter_list(e,t,a){$("#filters_"+t+"_"+a).load("inc/frontend_filters_inc.php?dat="+e+"&n="+t+"&i="+a),document.getElementById("filter_list_btn_"+t+"_"+a).style.display="none",1!=t&&(prev_n=parseInt(t)-1,document.getElementById("filter_hide_btn_"+prev_n+"_"+a).style.display="none")}function show_filter_options(e,t,a){document.getElementById("filter_options_"+e+"_"+t).style.display="block",$("#filter_options_"+e+"_"+t).load("inc/frontend_filters_inc_inc.php?dat="+a+"&n="+e+"&i="+t),next_n=parseInt(e)+1,prev_n=parseInt(e)-1,prev_n==$("#tot_filters_"+t).val()&&(document.getElementById("filter_list_btn_"+next_n+"_"+t).style.display="none",$("#tot_filters_"+t).val(prev_n)),$("#filter_"+e+"_"+t+" option[value='']").each(function(){$(this).remove()})}function show_add_filter(e,t,a){next_n=parseInt(e)+1,prev_n=parseInt(e)-1,prev_n==$("#tot_filters_"+t).val()&&(""!=a?(document.getElementById("filter_list_btn_"+next_n+"_"+t).style.display="block",$("#tot_filters_"+t).val(e)):(document.getElementById("filter_list_btn_"+next_n+"_"+t).style.display="none",$("#tot_filters_"+t).val(prev_n)))}function check_filter_charset(e,t,a){isNaN($("#filter_value_"+e+"_"+t).val())?($("#filter_value_"+e+"_"+t).val(""),show_add_filter(e,t,"")):show_add_filter(e,t,a)}function hide_filter_options(e,t){document.getElementById("filter_list_"+e+"_"+t).style.display="none",document.getElementById("filter_list_"+e+"_"+t).innerHTML="",document.getElementById("filter_options_"+e+"_"+t).style.display="none",document.getElementById("filter_options_"+e+"_"+t).innerHTML="",document.getElementById("filter_hide_btn_"+e+"_"+t).style.display="none",document.getElementById("filter_list_btn_"+e+"_"+t).style.display="block",next_n=parseInt(e)+1,document.getElementById("filter_list_btn_"+next_n+"_"+t).style.display="none",prev_n=parseInt(e)-1,1!=e&&(document.getElementById("filter_hide_btn_"+prev_n+"_"+t).style.display="block"),$("#tot_filters_"+t).val(prev_n)}function change_operator(e,t,a){for(ind=3;ind<=$("#tot_"+e+"_"+t).val();ind++)$("#junction_"+ind+"_"+t).val(a)}function restore_code(){1!=$("#contents_type_1").val()&&2!=$("#contents_type_1").val()&&3!=$("#contents_type_1").val()||(""==$("#attribute_list_1").val()?(document.getElementById("get_code_fake").style.display="block",document.getElementById("get_code_true").style.display="none"):(document.getElementById("get_code_fake").style.display="none",document.getElementById("get_code_true").style.display="block")),4==$("#contents_type_1").val()&&("0"!=$("#tot_inputs_1").val()?(document.getElementById("get_code_fake").style.display="none",document.getElementById("get_code_true").style.display="block"):(document.getElementById("get_code_fake").style.display="block",document.getElementById("get_code_true").style.display="none"))}function get_code_sections(e,t,a,_){for(string="",1==e&&(single_space="",multi_space="&nbsp;&nbsp;&nbsp;&nbsp;"),2==e&&(single_space="&nbsp;&nbsp;&nbsp;&nbsp;",multi_space="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"),1==$("#tot_languages").val()?(norewrite_link_language="?",rewrite_link_language="",htaccess_code_language="",htaccess_link_language="?id=$1"):(norewrite_link_language="?lan=<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='php_var'>&#36;lan</span>; <span class='php_script'>?&gt;</span>&",rewrite_link_language="<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='php_var'>&#36;lan</span>; <span class='php_script'>?&gt;</span>/",htaccess_code_language="([a-zA-Z0-9_-]+)/",htaccess_link_language="?lan=$1&id=$2"),next_i="",i_start=parseInt(e)+1,ind=i_start;ind<=$("#tot_attribute_set").val();ind++)if(document.getElementById("contents_type_"+ind)&&0!=document.getElementById("contents_type_"+ind).value){next_i=ind;break}if(3!=$("#contents_type_"+e).val()&&4!=$("#contents_type_"+e).val()||(prev_f=a,1==e?a=parseInt(a)+1:1==$("#level_"+e).val()?(1==t&&(a=parseInt(a)+1),2==$("#level_"+t).val()&&(a=parseInt(a)-1)):1==$("#level_"+t).val()&&(a=parseInt(a)+1)),1==$("#contents_type_"+e).val()||2==$("#contents_type_"+e).val()||5==$("#contents_type_"+e).val()){for(label=$("#label_"+e).val(),1==$("#contents_type_"+e).val()&&(label_code=$("#label_code_"+e).val(),item_name_in="<span class='php_var'>&#36;"+label_code+"</span>",item_id_in="<span class='php_var'>&#36;"+label_code+"</span>",multiple_space=""),2==$("#contents_type_"+e).val()&&(label_code=$("#single_item_selected_label_"+e).val(),item_name_in="<span class='php_string'>'"+label_code+"'</span>",item_id_in="<span class='php_string'>'"+label_code+"'</span>",multiple_space=""),5==$("#contents_type_"+e).val()&&(2==$("#contents_type_1").val()?(label_code=$("#single_item_selected_label_1").val(),item_name_in="<span class='php_string'>'"+label_code+"'</span>",item_id_in="<span class='php_string'>'"+label_code+"'</span>",multiple_space="&nbsp;&nbsp;&nbsp;&nbsp;"):(label_code=$("#label_code_parent_"+e).val(),item_name_in="<span class='php_var'>&#36;"+label_code+"</span>",item_id_in="<span class='php_var'>&#36;"+label_code+"</span>",multiple_space="&nbsp;&nbsp;&nbsp;&nbsp;")),attribute_list_array=$("#attribute_list_"+e).val().split("___"),attribute_list_num=attribute_list_array.length,ind=1;ind<attribute_list_num;ind++)item_id="",item_name=item_name_in,attribute_list_subarray=attribute_list_array[ind].split("---"),comment_label=attribute_list_subarray[2].replace("-###-","'"),main_attribute=attribute_list_subarray[3],image_attribute="''",image_text="",related_attribute="",multiple_attribute=0,"related"==attribute_list_subarray[4]&&(label=$("#parent_attribute_"+e+"_"+attribute_list_subarray[3]+"_label").val(),main_attribute=$("#parent_attribute_"+e+"_"+attribute_list_subarray[3]).val(),related_attribute=attribute_list_subarray[3]),"link"==attribute_list_subarray[0]?(link_related=comment_label,""!=comment_label&&(link_related="sec_"+comment_label),string=string+multiple_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_link")+" "+label+" --&gt;</span><br/>",string=string+multiple_space+"<span class='html_anchor'>&lt;a href=</span><span class='html_val'>&quot;"+load_text("frontend_section_file")+"?id=</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_link<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+attribute_list_subarray[1]+"'</span>, <span class='php_string'>'"+link_related+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_anchor'>&gt;</span>"+load_text("frontend_section_link_text")+"<span class='html_anchor'>&lt;/a&gt;</span><br/><br/>"):"image"==attribute_list_subarray[0]||"thumb"==attribute_list_subarray[0]?("thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),"image"==attribute_list_subarray[0]&&(image_text=""),string=string+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+image_text+" "+label+" --&gt;</span><br/>",string=string+multiple_space+"<span class='html_img'>&lt;img src=</span><span class='html_val'>&quot;</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_img'>&gt;</span><br/><br/>"):"checkbox"==attribute_list_subarray[0]?(string=string+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)){</span> <span class='php_script'>?&gt;</span>"+load_text("frontend_section_check_text")+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> <span class='php_script'>?&gt;</span><br/><br/>"):"textarea"==attribute_list_subarray[0]?(string=string+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='html_val'>nl2br</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>))</span>; <span class='php_script'>?&gt;</span><br/><br/>"):"standard"==attribute_list_subarray[0]&&(string=string+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/><br/>");for(multi=1;multi<=$("#multi_related_num_"+e).val();multi++)if(""!=$("#multi_attribute_list_"+e+"_"+multi).val()){for(multi_attribute_list_array=$("#multi_attribute_list_"+e+"_"+multi).val().split("___"),multi_attribute_list_num=multi_attribute_list_array.length,1==$("#contents_type_"+e).val()&&(item_id='<span class="php_var">&#36;'+$("#label_code_"+e).val()+"</span>"),2==$("#contents_type_"+e).val()&&(item_id="<span class='php_string'>'"+$("#single_item_selected_label_"+e).val()+"'</span>"),label_code=$("#multi_related_"+e+"_"+multi).val(),item_name='<span class="php_var">&#36;'+$("#multi_related_"+e+"_"+multi).val()+"</span>",multiple_space="&nbsp;&nbsp;&nbsp;&nbsp;",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_start_cycle")+" --&gt;</span><br/>",string=string+multi_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>foreach</span><span class='html_script'>(</span>get_multiple_value<span class='html_script'>(</span>"+item_id+",<span class='php_string'>'"+label_code+"'</span>)</span> <span class='php_key'>as</span> "+item_name+"<span class='html_script'>)</span>{ <span class='php_script'>?&gt;</span><br/><br/>",ind=1;ind<multi_attribute_list_num;ind++)attribute_list_subarray=multi_attribute_list_array[ind].split("---"),label=$("#parent_attribute_"+e+"_"+attribute_list_subarray[3]+"_label").val(),comment_label=attribute_list_subarray[2].replace("-###-","'"),main_attribute=attribute_list_subarray[3],related_attribute="",5==attribute_list_subarray[1]&&"thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),5==attribute_list_subarray[1]&&"image"==attribute_list_subarray[0]&&(image_text=""),"link"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_link")+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='html_anchor'>&lt;a href=</span><span class='html_val'>&quot;"+load_text("frontend_section_file")+"?id=</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_link<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+attribute_list_subarray[1]+"'</span>, <span class='php_string'>''</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_anchor'>&gt;</span>"+load_text("frontend_section_link_text")+"<span class='html_anchor'>&lt;/a&gt;</span><br/><br/>"):"image"==attribute_list_subarray[0]||"thumb"==attribute_list_subarray[0]?("thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),"image"==attribute_list_subarray[0]&&(image_text=""),string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+image_text+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='html_img'>&lt;img src=</span><span class='html_val'>&quot;</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_img'>&gt;</span><br/><br/>"):"checkbox"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)){</span> <span class='php_script'>?&gt;</span>"+load_text("frontend_section_check_text")+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> <span class='php_script'>?&gt;</span><br/><br/>"):"textarea"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='html_val'>nl2br</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>))</span>; <span class='php_script'>?&gt;</span><br/><br/>"):"standard"==attribute_list_subarray[0]&&(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/><br/>");string=string+multi_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> end_cycle<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/>",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_end_cycle")+" --&gt;</span><br/><br/>"}next_i&&(string=string+"<div id='codes_"+e+"'></div>")}if(3==$("#contents_type_"+e).val()){for(parent_label_code="<span class='php_string'>''</span>",label=$("#label_"+e).val(),item_id="<span class='php_string'>'0'</span>",label_code=$("#label_code_"+e).val(),item_name="<span class='php_var'>&#36;"+$("#label_code_"+e).val()+"</span>",limit_order="#§",cycle_number="",page_number="",limit="",new_order="",cycle_number=$("#total_number_"+e).val(),document.getElementById("page_number_"+e)&&(page_number=$("#page_number_"+e).val()),""==cycle_number&&""==page_number||(limit=cycle_number+"#"+page_number),"DEF"==$("input[name=order_type_"+e+"]:checked").val()&&(new_order="#"),"RAND"==$("input[name=order_type_"+e+"]:checked").val()&&(new_order="#RAND"),"MAN"==$("input[name=order_type_"+e+"]:checked").val()&&(new_order=$("#order_select_"+e).val()+"#"+$("#order_direction_"+e).val()),""==limit&&""==new_order||(limit_order=limit+"§"+new_order),fields="",filter="",tot_filters=$("#tot_filters_"+e).val(),n=1;n<=tot_filters;n++)junction="AND",name=$("#filter_"+n+"_"+e).val(),operator=$("#operator_"+n+"_"+e).val(),filter_type=$("#filter_type_"+n+"_"+e).val(),value=$("#filter_value_"+n+"_"+e).val(),filter=filter+junction+"#"+name+"#"+operator+"#"+value+"§";for(fields=filter,e>=2&&(2==$("#contents_type_1").val()?(related_attribute=$("#related_attribute_"+e).val(),or_str=$("#single_item_selected_label_1").val(),related_attribute_set=or_str.replace("obj_",""),fields=fields+"AND#"+related_attribute+"#LIKE#"+related_attribute_set+"§"):(related_attribute=$("#related_attribute_"+e).val(),related_attribute_set="'.<span class='php_var'>&#36;"+$("#related_attribute_set_"+e).val()+"</span>.'",fields=fields+"AND#"+related_attribute+"#LIKE#"+related_attribute_set+"§")),1==$("#count_elements_"+e+":checked").prop("checked")&&(string=string+single_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_count_cycle")+" "+label+" --&gt;</span><br/>",string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='php_key'>count</span><span class='html_script'>(</span>get_cycle<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>))</span> <span class='php_script'>?&gt;</span><br/><br/>"),string=string+single_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_start_cycle")+" "+label+" --&gt;</span><br/>",1==$("#alternate_content_"+e+":checked").prop("checked")&&(string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>get_cycle<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>)</span> <span class='html_script'>){</span> <span class='php_script'>?&gt;</span><br/>",single_space+="&nbsp;&nbsp;&nbsp;&nbsp;",multi_space+="&nbsp;&nbsp;&nbsp;&nbsp;"),string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>foreach</span><span class='html_script'>(</span>get_cycle<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>)</span> <span class='php_key'>as</span> "+item_name+"<span class='html_script'>){</span> <span class='php_script'>?&gt;</span><br/><br/>",attribute_list_array=$("#attribute_list_"+e).val().split("___"),attribute_list_num=attribute_list_array.length,ind=1;ind<attribute_list_num;ind++)label=$("#label_"+e).val(),attribute_list_subarray=attribute_list_array[ind].split("---"),comment_label=attribute_list_subarray[2].replace("-###-","'"),main_attribute=attribute_list_subarray[3],image_attribute="''",image_text="",related_attribute="",multiple_attribute=0,multiple_space="","related"==attribute_list_subarray[4]&&(label=$("#parent_attribute_"+e+"_"+attribute_list_subarray[3]+"_label").val(),main_attribute=$("#parent_attribute_"+e+"_"+attribute_list_subarray[3]).val(),related_attribute=attribute_list_subarray[3]),5==attribute_list_subarray[1]&&"thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),5==attribute_list_subarray[1]&&"image"==attribute_list_subarray[0]&&(image_text=""),"link"==attribute_list_subarray[0]?(link_related=comment_label,""!=comment_label&&(link_related="sec_"+comment_label),string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_link")+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='html_anchor'>&lt;a href=</span><span class='html_val'>&quot;"+load_text("frontend_section_file")+"?id=</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_link<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+attribute_list_subarray[1]+"'</span>, <span class='php_string'>'"+link_related+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_anchor'>&gt;</span>"+load_text("frontend_section_link_text")+"<span class='html_anchor'>&lt;/a&gt;</span><br/><br/>"):"count"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_count")+" "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_count<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+attribute_list_subarray[1]+"'</span>, <span class='php_string'>''</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/><br/>"):"image"==attribute_list_subarray[0]||"thumb"==attribute_list_subarray[0]?("thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),"image"==attribute_list_subarray[0]&&(image_text=""),string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+image_text+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='html_img'>&lt;img src=</span><span class='html_val'>&quot;</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_img'>&gt;</span><br/><br/>"):"checkbox"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)){</span> <span class='php_script'>?&gt;</span>"+load_text("frontend_section_check_text")+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> <span class='php_script'>?&gt;</span><br/><br/>"):"textarea"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='html_val'>nl2br</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>))</span>; <span class='php_script'>?&gt;</span><br/><br/>"):"standard"==attribute_list_subarray[0]&&(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/><br/>");for(multi=1;multi<=$("#multi_related_num_"+e).val();multi++)if(""!=$("#multi_attribute_list_"+e+"_"+multi).val()){for(multi_attribute_list_array=$("#multi_attribute_list_"+e+"_"+multi).val().split("___"),multi_attribute_list_num=multi_attribute_list_array.length,item_id='<span class="php_var">&#36;'+$("#label_code_"+e).val()+"</span>",label_code=$("#multi_related_"+e+"_"+multi).val(),item_name='<span class="php_var">&#36;'+$("#multi_related_"+e+"_"+multi).val()+"</span>",multiple_space="&nbsp;&nbsp;&nbsp;&nbsp;",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_start_cycle")+" --&gt;</span><br/>",string=string+multi_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>foreach</span><span class='html_script'>(</span>get_multiple_value<span class='html_script'>(</span>"+item_id+",<span class='php_string'>'"+label_code+"'</span>)</span> <span class='php_key'>as</span> "+item_name+"<span class='html_script'>)</span>{ <span class='php_script'>?&gt;</span><br/><br/>",ind=1;ind<multi_attribute_list_num;ind++)attribute_list_subarray=multi_attribute_list_array[ind].split("---"),label=$("#parent_attribute_"+e+"_"+attribute_list_subarray[3]+"_label").val(),comment_label=attribute_list_subarray[2].replace("-###-","'"),main_attribute=attribute_list_subarray[3],related_attribute="",5==attribute_list_subarray[1]&&"thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),5==attribute_list_subarray[1]&&"image"==attribute_list_subarray[0]&&(image_text=""),"link"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_link")+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='html_anchor'>&lt;a href=</span><span class='html_val'>&quot;"+load_text("frontend_section_file")+"?id=</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_link<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+attribute_list_subarray[1]+"'</span>, <span class='php_string'>''</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_anchor'>&gt;</span>"+load_text("frontend_section_link_text")+"<span class='html_anchor'>&lt;/a&gt;</span><br/><br/>"):"image"==attribute_list_subarray[0]||"thumb"==attribute_list_subarray[0]?("thumb"==attribute_list_subarray[0]&&(image_text=load_text("frontend_section_copy_thumb"),image_attribute="'thumb'"),"image"==attribute_list_subarray[0]&&(image_text=""),string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+image_text+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='html_img'>&lt;img src=</span><span class='html_val'>&quot;</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_img'>&gt;</span><br/><br/>"):"checkbox"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)){</span> <span class='php_script'>?&gt;</span>"+load_text("frontend_section_check_text")+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> <span class='php_script'>?&gt;</span><br/><br/>"):"textarea"==attribute_list_subarray[0]?(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> <span class='html_val'>nl2br</span><span class='html_script'>(</span>get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>))</span>; <span class='php_script'>?&gt;</span><br/><br/>"):"standard"==attribute_list_subarray[0]&&(string=string+multi_space+multiple_space+"<span class='html_comment'>&lt;!-- "+comment_label+" "+label+" --&gt;</span><br/>",string=string+multi_space+multiple_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_value<span class='html_script'>(</span>"+item_name+", <span class='php_string'>'"+main_attribute+"'</span>, <span class='php_string'>"+image_attribute+"</span>, <span class='php_string'>'"+related_attribute+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/><br/>");string=string+multi_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> end_cycle<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/>",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_end_cycle")+" --&gt;</span><br/><br/>"}next_i&&2==next_i&&(string=string+"<div id='codes_"+e+"'></div>"),label=$("#label_"+e).val(),label_code=$("#label_code_"+e).val(),string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> end_cycle<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><br/>",string=string+single_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_end_cycle")+" "+label+" --&gt;</span><br/><br/>",1==$("#alternate_content_"+e+":checked").prop("checked")&&(single_space=single_space.replace("&nbsp;&nbsp;&nbsp;&nbsp;",""),multi_space=multi_space.replace("&nbsp;&nbsp;&nbsp;&nbsp;",""),string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span><span class='php_key'>else</span><span class='html_script'>{</span> <span class='php_script'>?&gt;</span><br/>",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_alternate")+" --&gt;</span><br/>",string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span> <span class='php_script'>?&gt;</span><br/>"),""!=page_number&&(string=string+single_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_page")+" --&gt;</span><br/>",string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>check_pages<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>, <span class='php_string'>'prev'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>)</span><span class='html_script'>){</span><span class='php_script'>?&gt;</span><br/>",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_prev")+" --&gt;</span><br/>",string=string+multi_space+"<span class='html_anchor'>&lt;a href=</span><span class='html_val'>&quot;</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_pages<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>, <span class='php_string'>'prev'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_anchor'>&gt;</span>"+load_text("frontend_section_copy_prev_text")+"<span class='html_anchor'>&lt;/a&gt;</span><br/>",string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span>; <span class='php_script'>?&gt;</span><br/><br/>",string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='php_key'>if</span><span class='html_script'>(</span>check_pages<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>, <span class='php_string'>'next'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>)</span><span class='html_script'>){</span><span class='php_script'>?&gt;</span><br/>",string=string+multi_space+"<span class='html_comment'>&lt;!-- "+load_text("frontend_section_copy_next")+" --&gt;</span><br/>",string=string+multi_space+"<span class='html_anchor'>&lt;a href=</span><span class='html_val'>&quot;</span><span class='php_script'>&lt;?php</span> <span class='php_key'>echo</span> get_pages<span class='html_script'>(</span><span class='php_string'>'"+label_code+"'</span>,<span class='php_string'>'"+limit_order+"'</span>, <span class='php_string'>'next'</span>,<span class='php_string'>'"+fields+"'</span><span class='html_script'>)</span>; <span class='php_script'>?&gt;</span><span class='html_val'>&quot;</span><span class='html_anchor'>&gt;</span>"+load_text("frontend_section_copy_next_text")+"<span class='html_anchor'>&lt;/a&gt;</span><br/>",string=string+single_space+"<span class='php_script'>&lt;?php</span> <span class='html_script'>}</span>; <span class='php_script'>?&gt;</span><br/><br/>"),next_i&&next_i>=2&&(string=string+"<div id='codes_"+e+"'></div>")}document.getElementById("code_instruction").innerHTML=load_text("frontend_section_copy"),document.getElementById("codes_"+t).innerHTML="<code>"+string+"</code>",1==_?(document.getElementById("codes_form").innerHTML="<code>"+string_form+"</code>",document.getElementById("codes_box_form").style.display="block",document.getElementById("code_instruction").style.display="none",document.getElementById("codes_"+t).style.display="none"):(document.getElementById("code_instruction").style.display="block",document.getElementById("codes_"+t).style.display="block"),next_i?get_code_sections(next_i,e,a,_):show_code_box()}function show_code_box(){document.getElementById("codes_box").style.display="block",document.getElementById("code_options").style.display="none"}function get_code_options(){document.getElementById("codes_0").innerHTML="",document.getElementById("codes_box").style.display="none",document.getElementById("codes_box_form").style.display="none",document.getElementById("code_options").style.display="block"}function getCookie(e){var t=("; "+document.cookie).split("; "+e+"=");if(2==t.length)return t.pop().split(";").shift()}function tutorial_close(){$(".tutorial-container").removeClass("tutorial-container-open"),$(".container-header-top").removeClass("container-header-top-open"),$(".container-header-bottom").removeClass("container-header-bottom-open"),$(".cnt").removeClass("cnt-open");var e=new Date;e.setTime(e.getTime()+36e5);var t="expires="+e.toUTCString();document.cookie="rad_tutorial_visibility=0 ; "+t+"; path=/",$("#tutorial_icon").attr("onclick","tutorial_open()"),$("#tutorial_icon").attr("title",load_text("tutorial_open_up")),set_edit_buttons()}function tutorial_open(){$(".tutorial-container").addClass("tutorial-container-open"),$(".container-header-top").addClass("container-header-top-open"),$(".container-header-bottom").addClass("container-header-bottom-open"),$(".cnt").addClass("cnt-open");var e=new Date;e.setTime(e.getTime()+36e5);var t="expires="+e.toUTCString();document.cookie="rad_tutorial_visibility=1 ; "+t+"; path=/",$("#tutorial_icon").attr("onclick","tutorial_close()"),$("#tutorial_icon").attr("title",load_text("tutorial_open_down")),set_edit_buttons()}function tutorial_nav(e){null==getCookie("rad_tutorial_step")||0==getCookie("rad_tutorial_step")?(cookie_step_value=0,$("#tutorial-intro").removeClass("tutorial-intro-open"),$("#tutorial-step").addClass("tutorial-step-open"),$(".tutorial-close .first").addClass("tutorial-step-open"),valore=$("#tutorial_name").val()):(cookie_step_value=parseInt(getCookie("rad_tutorial_step")),valore=getCookie("rad_tutorial")),"first"==e?(valore_step=0,$("#tutorial-intro").addClass("tutorial-intro-open"),$("#tutorial-step").removeClass("tutorial-step-open"),$(".tutorial-close .first").removeClass("tutorial-step-open"),tutorial_allow_start()):"next"==e?(valore_step=cookie_step_value+1,$("#tutorial-step").load("inc/tutorial_inc.php?tutorial_n="+valore+"&step_n="+valore_step)):(valore_step=cookie_step_value-1,0==valore_step?($("#tutorial-intro").addClass("tutorial-intro-open"),$("#tutorial-step").removeClass("tutorial-step-open"),$(".tutorial-close .first").removeClass("tutorial-step-open"),tutorial_allow_start()):$("#tutorial-step").load("inc/tutorial_inc.php?tutorial_n="+valore+"&step_n="+valore_step));var t=new Date;t.setTime(t.getTime()+36e5);var a="expires="+t.toUTCString();document.cookie="rad_tutorial="+valore+"; "+a+"; path=/",document.cookie="rad_tutorial_step="+valore_step+"; "+a+"; path=/"}function tutorial_allow_start(){0==$("#tutorial_name").val()?($("#tutorial-next-fake").css("display","block"),$("#tutorial-next-real").css("display","none")):($("#tutorial-next-fake").css("display","none"),$("#tutorial-next-real").css("display","block")),$("#tutorial-step").html("")}function mobile_menu_open(){$(".container-header-bottom").toggleClass("container-header-bottom-mobileopen"),$(".mobile-menu-back").toggleClass("mobile-menu-back-open")}function list_functions_open(e){$("#list_functions_"+e).hasClass("list_functions_open")?$("#list_functions_"+e).removeClass("list_functions_open"):($(".list_functions_open").removeClass("list_functions_open"),$("#list_functions_"+e).addClass("list_functions_open"))}function set_add_buttons(){$(window).width()>640?checkpoint=127:checkpoint=72,$(window).scrollTop()>checkpoint?($(".menu_list").addClass("menu_list_fixed"),$(".corpo").addClass("corpo_fixed")):($(".menu_list").removeClass("menu_list_fixed"),$(".corpo").removeClass("corpo_fixed"))}function set_edit_buttons(){var e=$(window).height();$(".tutorial-container").hasClass("tutorial-container-open")?add_height=325:add_height=85,$("#in_page").height()+add_height>e?($(".edit_buttons").addClass("edit_buttons_fixed"),$(".page_bottom").addClass("page_bottom_fixed")):($(".edit_buttons").removeClass("edit_buttons_fixed"),$(".page_bottom").removeClass("page_bottom_fixed"))}function show_mobile_tooltip(e){$("#mobile_tooltip_"+e).toggleClass("mobile_tooltip_display")}jQuery.extend({handleError:function(e,t,a,_){e.error?e.error(t,a,_):t.responseText&&console.log(t.responseText)}});